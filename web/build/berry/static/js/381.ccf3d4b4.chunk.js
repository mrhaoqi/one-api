"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[381],{1675:function(e,t,i){var n=i(5043),a=i(6446),r=i(6240),s=i(4535),c=i(310),o=i(579);const l=(0,n.forwardRef)(({children:e,color:t="default",variant:i="soft",startIcon:n,endIcon:s,sx:c,...l},h)=>{const u=(0,r.A)(),x={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,o.jsxs)(d,{ref:h,component:"span",ownerState:{color:t,variant:i},sx:{...n&&{pl:.75},...s&&{pr:.75},...c},theme:u,...l,children:[n&&(0,o.jsxs)(a.A,{sx:{mr:.75,...x},children:[" ",n," "]}),e,s&&(0,o.jsxs)(a.A,{sx:{ml:.75,...x},children:[" ",s," "]})]})});t.A=l;const d=(0,s.Ay)(a.A)(({theme:e,ownerState:t})=>{var i,n,a,r,s;const o="filled"===t.variant,l="outlined"===t.variant,d="soft"===t.variant,h="ghost"===t.variant,u={..."default"===t.color&&{...o&&{color:e.palette.grey[300],backgroundColor:e.palette.text.primary},...l&&{color:e.palette.grey[500],border:`2px solid ${e.palette.grey[500]}`},...d&&{color:e.palette.text.secondary,backgroundColor:(0,c.X4)(e.palette.grey[500],.16)}}},x={..."default"!==t.color&&{...o&&{color:e.palette.background.paper,backgroundColor:null===(i=e.palette[t.color])||void 0===i?void 0:i.main},...l&&{backgroundColor:"transparent",color:null===(n=e.palette[t.color])||void 0===n?void 0:n.main,border:`2px solid ${null===(a=e.palette[t.color])||void 0===a?void 0:a.main}`},...d&&{color:e.palette[t.color].dark,backgroundColor:(0,c.X4)(null===(r=e.palette[t.color])||void 0===r?void 0:r.main,.16)},...h&&{color:null===(s=e.palette[t.color])||void 0===s?void 0:s.main}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:e.spacing(0,.75),fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightBold,transition:e.transitions.create("all",{duration:e.transitions.duration.shorter}),...u,...x}})},1780:function(e,t,i){i.d(t,{h:function(){return o}});var n,a,r=i(5043);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s.apply(null,arguments)}function c({title:e,titleId:t,...i},c){return r.createElement("svg",s({t:1723135116886,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":10969,width:200,height:200,ref:c,"aria-labelledby":t},i),e?r.createElement("title",{id:t},e):null,n||(n=r.createElement("path",{d:"M512 960C265 960 64 759 64 512S265 64 512 64s448 201 448 448-201 448-448 448z m0-882.6c-239.7 0-434.6 195-434.6 434.6s195 434.6 434.6 434.6 434.6-195 434.6-434.6S751.7 77.4 512 77.4z","p-id":10970,fill:"#2c2c2c",stroke:"#2c2c2c",strokeWidth:60})),a||(a=r.createElement("path",{d:"M197.7 512c0-78.3 31.6-98.8 87.2-98.8 56.2 0 87.2 20.5 87.2 98.8s-31 98.8-87.2 98.8c-55.7 0-87.2-20.5-87.2-98.8z m130.4 0c0-46.8-7.8-64.5-43.2-64.5-35.2 0-42.9 17.7-42.9 64.5 0 47.1 7.8 63.7 42.9 63.7 35.4 0 43.2-16.6 43.2-63.7zM409.7 415.9h42.1V608h-42.1V415.9zM653.9 512c0 74.2-37.1 96.1-93.6 96.1h-65.9V415.9h65.9c56.5 0 93.6 16.1 93.6 96.1z m-43.5 0c0-49.3-17.7-60.6-52.3-60.6h-21.6v120.7h21.6c35.4 0 52.3-13.3 52.3-60.1zM686.5 512c0-74.2 36.3-98.8 92.7-98.8 18.3 0 33.2 2.2 44.8 6.4v36.3c-11.9-4.2-26-6.6-42.1-6.6-34.6 0-49.8 15.5-49.8 62.6 0 50.1 15.2 62.6 49.3 62.6 15.8 0 30.2-2.2 44.8-7.5v36c-11.3 4.7-28.5 8-46.8 8-56.1-0.2-92.9-18.7-92.9-99z","p-id":10971,fill:"#2c2c2c",stroke:"#2c2c2c",strokeWidth:20})))}const o=r.forwardRef(c);t.A=i.p+"static/media/oidc.44b7392aa30b40c0f3a31f7d10919be5.svg"},2511:function(e,t,i){i(5043);var n=i(1081),a=i(6600),r=i(5316),s=i(8903),c=i(5865),o=i(7784),l=i(2518),d=i(3516),h=i(9985),u=i(3033),x=i(579);const p=u.Ik().shape({code:u.Yj().required("\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a")});t.A=({open:e,handleClose:t,wechatLogin:i,qrCode:u})=>(0,x.jsxs)(n.A,{open:e,onClose:t,children:[(0,x.jsx)(a.A,{children:"\u5fae\u4fe1\u9a8c\u8bc1\u7801\u767b\u5f55"}),(0,x.jsx)(r.A,{children:(0,x.jsxs)(s.Ay,{container:!0,direction:"column",alignItems:"center",children:[(0,x.jsx)("img",{src:u,alt:"\u4e8c\u7ef4\u7801",style:{maxWidth:"300px",maxHeight:"300px",width:"auto",height:"auto"}}),(0,x.jsx)(c.A,{variant:"body2",color:"text.secondary",style:{marginTop:"10px",textAlign:"center",wordWrap:"break-word",maxWidth:"300px"},children:"\u8bf7\u4f7f\u7528\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801\u5173\u6ce8\u516c\u4f17\u53f7\uff0c\u8f93\u5165\u300c\u9a8c\u8bc1\u7801\u300d\u83b7\u53d6\u9a8c\u8bc1\u7801\uff08\u4e09\u5206\u949f\u5185\u6709\u6548\uff09"}),(0,x.jsx)(d.l1,{initialValues:{code:""},validationSchema:p,onSubmit:e=>{const{success:n,message:a}=i(e.code);n?t():(0,h.Qg)(a||"\u672a\u77e5\u9519\u8bef")},children:({errors:e,touched:t})=>(0,x.jsxs)(d.lV,{style:{width:"100%"},children:[(0,x.jsx)(s.Ay,{item:!0,xs:12,children:(0,x.jsx)(d.D0,{as:o.A,name:"code",label:"\u9a8c\u8bc1\u7801",error:t.code&&Boolean(e.code),helperText:t.code&&e.code,fullWidth:!0})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,children:(0,x.jsx)(l.A,{type:"submit",fullWidth:!0,children:"\u63d0\u4ea4"})})]})})]})})]})},3728:function(e,t,i){i.d(t,{h:function(){return c}});var n,a=i(5043);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r.apply(null,arguments)}function s({title:e,titleId:t,...i},s){return a.createElement("svg",r({t:1723134993089,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":7682,width:200,height:200,ref:s,"aria-labelledby":t},i),e?a.createElement("title",{id:t},e):null,n||(n=a.createElement("path",{d:"M138.67 472.593v267.659l1.085 0.825c30.488 23.11 68.369 45.41 109.072 62.904l1.473 0.63c57.452 24.487 117.23 38.204 176.468 38.39 49.026 0.15 94.773-6.199 138.432-20.266 23.88-7.694 47.048-17.68 69.546-30.137-16.42-1.696-32.855-4.635-49.166-8.6-68.949-16.77-138.975-52.578-203.999-96.138-92.077-61.684-178.453-141.863-242.91-215.267zM597.31 182H350.745l25.776 22.626 6.472 5.7 7.9 6.985 6.658 5.915 4.791 4.275 6.144 5.509 5.17 4.665 4.297 3.899 4.876 4.451 4.077 3.748 3.337 3.085 4.594 4.276 3.238 3.034 3.21 3.026 1.917 1.814 1.633 1.553a1573.085 1573.085 0 0 1 16.368 15.806c61.384 60.116 109.769 118.745 146.283 181.615 34.096-38.136 67.506-67.95 100.368-90.075-0.08-0.224-0.158-0.452-0.233-0.681-9.674-29.434-24.133-63.778-41.697-96.235-20.272-37.46-43.21-69.797-68.284-94.664l-0.331-0.327z m149.927 506.476a42.573 42.573 0 0 1 13.201-4.727c12.04-16.686 22.616-34.537 32.12-53.8 5.835-11.824 11.243-24.101 16.582-37.512l1.185-2.999c0.593-1.509 1.184-3.032 1.776-4.572l1.184-3.099a817.09 817.09 0 0 0 2.963-7.94l0.902-2.466 1.54-4.256 1.24-3.478 0.944-2.668 1.282-3.658 1.32-3.797 1.364-3.963 1.784-5.225 10.079-29.815 1.237-3.615 1.619-4.688 1.193-3.419 1.176-3.34 1.16-3.261 0.766-2.133 1.137-3.139 0.75-2.052 0.747-2.022 1.11-2.977 0.735-1.948 0.731-1.92 0.728-1.893 1.086-2.789 1.08-2.731 0.717-1.79 0.716-1.766 0.715-1.743 0.714-1.721 1.07-2.54 0.713-1.668 0.714-1.649 0.357-0.816 0.715-1.62 0.358-0.803 0.717-1.593 0.72-1.576 0.72-1.56 0.725-1.545 0.727-1.53 0.73-1.515 0.734-1.503 0.739-1.49 0.743-1.478 0.373-0.735 0.75-1.461 0.756-1.452 0.761-1.443 0.768-1.434 0.774-1.426 0.78-1.42 0.789-1.413 0.796-1.407 0.803-1.402 0.813-1.399c0.272-0.465 0.545-0.93 0.82-1.395 6.898-11.644 14.45-22.205 22.804-31.716l0.381-0.432-0.363-0.1a167.736 167.736 0 0 0-17.333-3.808l-1.17-0.187c-19.22-3.015-38.771-2.474-59.435 2.33C766 404.728 707.642 444.655 643.04 520.58c-50.09 58.868-112.372 100.194-178.36 119.035 48.387 29.017 96.32 50.621 141.075 61.507 55.428 13.48 102.617 9.838 140.868-12.298z m40.248 75.25a229.325 229.325 0 0 1-21.023 10.522 420.333 420.333 0 0 1-20.405 18.512c-50.095 42.57-103.865 72.408-161.229 90.891-50.432 16.25-102.815 23.52-158.258 23.355-68.336-0.22-136.434-15.846-201.363-43.52-52.844-22.523-101.532-52.32-138.874-83.06a32.016 32.016 0 0 1-11.662-24.212l-0.003-364.272a663.709 663.709 0 0 1-3.155-4.546l-0.395-0.584c-12.855-19.356-7.842-45.51 11.382-58.72 19.417-13.345 45.98-8.428 59.33 10.98 49.099 71.385 141.145 170.175 245.108 248.023 60.719-0.825 122.443-27.243 174.57-74.197-34.118-63.594-81.951-122.977-145.085-184.807a1497.032 1497.032 0 0 0-16.553-15.971l-3.41-3.23-3.07-2.888-3.727-3.484-3.783-3.514-3.854-3.556-3.938-3.61-5.403-4.921-4.184-3.786-5.043-4.54-4.477-4.008-6.214-5.538-7.36-6.527-9.592-8.463-8.388-7.371-15.995-14.032-10.596-9.324-7.673-6.781-6.151-5.465-4.92-4.397-4.536-4.081-3.615-3.28-3.395-3.104-2.68-2.472-2.058-1.913-2.48-2.324-1.919-1.814-1.871-1.783-2.735-2.632-2.231-2.172-1.92-1.888a702.481 702.481 0 0 1-6.747-6.754c-19.741-20.021-5.898-53.785 21.938-54.458l0.848-0.01h341.332a32 32 0 0 1 21.426 8.232c34.675 31.26 64.87 72.453 90.762 120.299 17.457 32.258 32.066 66.007 42.695 96.357 13.332-5.523 26.586-9.793 39.771-12.858 28.861-6.71 56.686-7.48 83.844-3.22 21.406 3.358 40.992 9.48 62.014 18.392l1.835 0.783 1.842 0.796 1.861 0.816 1.894 0.839 1.94 0.868 1.996 0.903 11.45 5.265c23.934 10.99 25.088 44.57 1.966 57.177-18.753 10.224-33.09 24.764-45.475 45.42l-0.82 1.383-0.65 1.111-0.643 1.119-0.64 1.126-0.634 1.136-0.631 1.144-0.627 1.155-0.623 1.165-0.62 1.176-0.618 1.188-0.615 1.2-0.612 1.214-0.61 1.227-0.609 1.24-0.607 1.257-0.606 1.272-0.605 1.287-0.907 1.963-0.604 1.33-0.605 1.35-0.605 1.368-0.606 1.387-0.606 1.407-0.608 1.428-0.61 1.45-0.919 2.216-0.923 2.267-0.62 1.542-0.622 1.565-0.626 1.591-0.63 1.617-0.633 1.643-0.638 1.67-1.29 3.423-0.981 2.642-0.994 2.71-0.67 1.845-1.017 2.826-1.38 3.88-1.054 2.999-1.072 3.076-1.09 3.155-1.11 3.237-10.062 29.76-1.935 5.673-1.84 5.35-1.42 4.084-1.386 3.945-1.022 2.885-1.35 3.772-0.672 1.862-1.01 2.775c-8.668 23.731-17.234 44.304-27.005 64.106-11.498 23.305-24.457 44.997-39.33 65.303 0.773 15.454-6.924 30.784-21.242 39.07z","p-id":7683,fill:"#2c2c2c"})))}const c=a.forwardRef(s);t.A=i.p+"static/media/lark.2c2e13ed1159b183c096e9d6d5b14dc1.svg"},4617:function(e,t,i){var n=i(3862),a=i(6971),r=i(9985);t.A=()=>{const e=(0,a.Zp)();return{register:async(t,i)=>{try{let a=localStorage.getItem("aff");a&&(t={...t,aff_code:a});const s=await n.n.post(`/api/user/register?turnstile=${i}`,t),{success:c,message:o}=s.data;return c&&((0,r.Te)("\u6ce8\u518c\u6210\u529f\uff01"),e("/login")),{success:c,message:o}}catch(a){return{success:!1,message:""}}},sendVerificationCode:async(e,t)=>{try{const i=await n.n.get(`/api/verification?email=${e}&turnstile=${t}`),{success:a,message:s}=i.data;return a&&(0,r.Te)("\u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u68c0\u67e5\u4f60\u7684\u90ae\u7bb1\uff01"),{success:a,message:s}}catch(i){return{success:!1,message:""}}}}}},5086:function(e,t,i){i.r(t),i.d(t,{default:function(){return H}});var n=i(5043),a=i(7473),r=i(2110),s=i(8911),c=i(8122),o=i(3193),l=i(9190),d=i(4050),h=i(2518),u=i(7254),x=i(1081),p=i(6600),m=i(9336),g=i(5316),j=i(9347),A=i(2075),f=i(6853),v=i(9775),b=i(5698),y=i(7413),_=i(1675),w=i(3862),k=i(9985),C=i(3033),S=i(2511),I=i(9456),z=i(8903),W=i(1787),T=i(1673),V=i(3516),B=i(6240),E=i(4617),$=i(579);const F=C.Ik().shape({email:C.Yj().email("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740").required("\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a"),email_verification_code:C.Yj().required("\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a")});var Q=({open:e,handleClose:t,turnstileToken:i})=>{const a=(0,B.A)(),[r,s]=(0,n.useState)(30),[c,u]=(0,n.useState)(!1),{sendVerificationCode:m}=(0,E.A)(),[A,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=null;return c&&r>0?e=setInterval(()=>{s(r-1)},1e3):0===r&&(u(!1),s(30)),()=>clearInterval(e)},[c,r]);return(0,$.jsxs)(x.A,{open:e,onClose:t,children:[(0,$.jsx)(p.A,{children:"\u7ed1\u5b9a\u90ae\u7bb1"}),(0,$.jsx)(g.A,{children:(0,$.jsx)(z.Ay,{container:!0,direction:"column",alignItems:"center",children:(0,$.jsx)(V.l1,{initialValues:{email:"",email_verification_code:""},enableReinitialize:!0,validationSchema:F,onSubmit:async(e,{setErrors:i,setStatus:n,setSubmitting:a})=>{f(!0),a(!0);const r=await w.n.get(`/api/oauth/email/bind?email=${e.email}&code=${e.email_verification_code}`),{success:s,message:c}=r.data;s?((0,k.Te)("\u90ae\u7bb1\u8d26\u6237\u7ed1\u5b9a\u6210\u529f\uff01"),a(!1),n({success:!0}),t()):((0,k.Qg)(c),i({submit:c})),f(!1)},children:({errors:e,touched:n,handleBlur:s,handleChange:x,handleSubmit:p,values:g})=>(0,$.jsxs)("form",{noValidate:!0,onSubmit:p,children:[(0,$.jsxs)(o.A,{fullWidth:!0,error:Boolean(n.email&&e.email),sx:{...a.typography.customInput},children:[(0,$.jsx)(l.A,{htmlFor:"email",children:"Email"}),(0,$.jsx)(d.A,{id:"email",type:"text",value:g.email,name:"email",onBlur:s,onChange:x,endAdornment:(0,$.jsx)(W.A,{position:"end",children:(0,$.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>(async e=>{if(u(!0),""===e)return void(0,k.Qg)("\u8bf7\u8f93\u5165\u90ae\u7bb1");if(""===i)return void(0,k.Qg)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01");f(!0);const{success:t,message:n}=await m(e,i);f(!1),t||(0,k.Qg)(n)})(g.email),disabled:c||A,children:c?`\u91cd\u65b0\u53d1\u9001(${r})`:"\u83b7\u53d6\u9a8c\u8bc1\u7801"})}),inputProps:{}}),n.email&&e.email&&(0,$.jsx)(T.A,{error:!0,id:"helper-email",children:e.email})]}),(0,$.jsxs)(o.A,{fullWidth:!0,error:Boolean(n.email_verification_code&&e.email_verification_code),sx:{...a.typography.customInput},children:[(0,$.jsx)(l.A,{htmlFor:"email_verification_code",children:"\u9a8c\u8bc1\u7801"}),(0,$.jsx)(d.A,{id:"email_verification_code",type:"text",value:g.email_verification_code,name:"email_verification_code",onBlur:s,onChange:x,inputProps:{}}),n.email_verification_code&&e.email_verification_code&&(0,$.jsx)(T.A,{error:!0,id:"helper-email_verification_code",children:e.email_verification_code})]}),(0,$.jsxs)(j.A,{children:[(0,$.jsx)(h.A,{onClick:t,children:"\u53d6\u6d88"}),(0,$.jsx)(h.A,{disableElevation:!0,disabled:A,type:"submit",variant:"contained",color:"primary",children:"\u63d0\u4ea4"})]})]})})})})]})},R=i(6215),M=i.n(R),O=i(3728),q=i(1780);const Y=C.Ik().shape({username:C.Yj().required("\u7528\u6237\u540d \u4e0d\u80fd\u4e3a\u7a7a").min(3,"\u7528\u6237\u540d \u4e0d\u80fd\u5c0f\u4e8e 3 \u4e2a\u5b57\u7b26"),display_name:C.Yj(),password:C.Yj().test("password","\u5bc6\u7801\u4e0d\u80fd\u5c0f\u4e8e 8 \u4e2a\u5b57\u7b26",e=>!e||e.length>=8)});function H(){const[e,t]=(0,n.useState)([]),[i,C]=(0,n.useState)(!1),[z,W]=(0,n.useState)(!1),[T,V]=(0,n.useState)(""),[B,E]=(0,n.useState)(""),[F,R]=(0,n.useState)(!1),[H,P]=(0,n.useState)(!1),N=(0,I.d4)(e=>e.siteInfo),X=e=>{let{name:i,value:n}=e.target;t(e=>({...e,[i]:n}))};return(0,n.useEffect)(()=>{N&&N.turnstile_check&&(W(!0),V(N.turnstile_site_key)),(async()=>{let e=await w.n.get("/api/user/self");const{success:i,message:n,data:a}=e.data;i?t(a):(0,k.Qg)(n)})().then()},[N]),(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(a.A,{children:(0,$.jsx)(r.A,{sx:{paddingTop:"20px"},children:(0,$.jsxs)(s.A,{spacing:2,children:[(0,$.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,sx:{paddingBottom:"20px"},children:[(0,$.jsxs)(_.A,{variant:"ghost",color:e.wechat_id?"primary":"default",children:[(0,$.jsx)(v.A,{})," ",e.wechat_id||"\u672a\u7ed1\u5b9a"]}),(0,$.jsxs)(_.A,{variant:"ghost",color:e.github_id?"primary":"default",children:[(0,$.jsx)(b.A,{})," ",e.github_id||"\u672a\u7ed1\u5b9a"]}),(0,$.jsxs)(_.A,{variant:"ghost",color:e.email?"primary":"default",children:[(0,$.jsx)(y.A,{})," ",e.email||"\u672a\u7ed1\u5b9a"]}),(0,$.jsxs)(_.A,{variant:"ghost",color:e.lark_id?"primary":"default",children:[(0,$.jsx)(c.A,{component:O.h,inheritViewBox:"0 0 24 24"})," ",e.lark_id||"\u672a\u7ed1\u5b9a"]}),(0,$.jsxs)(_.A,{variant:"ghost",color:e.oidc_id?"primary":"default",children:[(0,$.jsx)(c.A,{component:q.h,inheritViewBox:"0 0 24 24"})," ",function(){if(!e.oidc_id)return"";let t=e.oidc_id;return e.oidc_id.length>8&&(t=e.oidc_id.slice(0,6)+"..."+e.oidc_id.slice(-6)),t}()||"\u672a\u7ed1\u5b9a"]})]}),(0,$.jsx)(f.A,{title:"\u4e2a\u4eba\u4fe1\u606f",children:(0,$.jsxs)(A.A,{container:!0,spacing:2,children:[(0,$.jsx)(A.A,{xs:12,children:(0,$.jsxs)(o.A,{fullWidth:!0,variant:"outlined",children:[(0,$.jsx)(l.A,{htmlFor:"username",children:"\u7528\u6237\u540d"}),(0,$.jsx)(d.A,{id:"username",label:"\u7528\u6237\u540d",type:"text",value:e.username||"",onChange:X,name:"username",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})]})}),(0,$.jsx)(A.A,{xs:12,children:(0,$.jsxs)(o.A,{fullWidth:!0,variant:"outlined",children:[(0,$.jsx)(l.A,{htmlFor:"password",children:"\u5bc6\u7801"}),(0,$.jsx)(d.A,{id:"password",label:"\u5bc6\u7801",type:"password",value:e.password||"",onChange:X,name:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})]})}),(0,$.jsx)(A.A,{xs:12,children:(0,$.jsxs)(o.A,{fullWidth:!0,variant:"outlined",children:[(0,$.jsx)(l.A,{htmlFor:"display_name",children:"\u663e\u793a\u540d\u79f0"}),(0,$.jsx)(d.A,{id:"display_name",label:"\u663e\u793a\u540d\u79f0",type:"text",value:e.display_name||"",onChange:X,name:"display_name",placeholder:"\u8bf7\u8f93\u5165\u663e\u793a\u540d\u79f0"})]})}),(0,$.jsx)(A.A,{xs:12,children:(0,$.jsx)(h.A,{variant:"contained",color:"primary",onClick:async()=>{try{await Y.validate(e);const t=await w.n.put("/api/user/self",e),{success:i,message:n}=t.data;i?(0,k.Te)("\u7528\u6237\u4fe1\u606f\u66f4\u65b0\u6210\u529f\uff01"):(0,k.Qg)(n)}catch(t){(0,k.Qg)(t.message)}},children:"\u63d0\u4ea4"})})]})}),(0,$.jsx)(f.A,{title:"\u8d26\u53f7\u7ed1\u5b9a",children:(0,$.jsxs)(A.A,{container:!0,spacing:2,children:[N.wechat_login&&!e.wechat_id&&(0,$.jsx)(A.A,{xs:12,md:4,children:(0,$.jsx)(h.A,{variant:"contained",onClick:()=>{R(!0)},children:"\u7ed1\u5b9a\u5fae\u4fe1\u8d26\u53f7"})}),N.github_oauth&&!e.github_id&&(0,$.jsx)(A.A,{xs:12,md:4,children:(0,$.jsx)(h.A,{variant:"contained",onClick:()=>(0,k.fu)(N.github_client_id,!0),children:"\u7ed1\u5b9a GitHub \u8d26\u53f7"})}),N.lark_client_id&&!e.lark_id&&(0,$.jsx)(A.A,{xs:12,md:4,children:(0,$.jsx)(h.A,{variant:"contained",onClick:()=>(0,k.eS)(N.lark_client_id),children:"\u7ed1\u5b9a \u98de\u4e66 \u8d26\u53f7"})}),N.oidc&&!e.oidc_id&&(0,$.jsx)(A.A,{xs:12,md:4,children:(0,$.jsx)(h.A,{variant:"contained",onClick:()=>(0,k.KV)(N.oidc_authorization_endpoint,N.oidc_client_id,!0),children:"\u7ed1\u5b9a OIDC \u8d26\u53f7"})}),(0,$.jsxs)(A.A,{xs:12,md:4,children:[(0,$.jsx)(h.A,{variant:"contained",onClick:()=>{P(!0)},children:e.email?"\u66f4\u6362\u90ae\u7bb1":"\u7ed1\u5b9a\u90ae\u7bb1"}),z?(0,$.jsx)(M(),{sitekey:T,onVerify:e=>{E(e)}}):(0,$.jsx)($.Fragment,{})]})]})}),(0,$.jsx)(f.A,{title:"\u5176\u4ed6",children:(0,$.jsxs)(A.A,{container:!0,spacing:2,children:[(0,$.jsx)(A.A,{xs:12,children:(0,$.jsx)(u.A,{severity:"info",children:"\u6ce8\u610f\uff0c\u6b64\u5904\u751f\u6210\u7684\u4ee4\u724c\u7528\u4e8e\u7cfb\u7edf\u7ba1\u7406\uff0c\u800c\u975e\u7528\u4e8e\u8bf7\u6c42 OpenAI \u76f8\u5173\u7684\u670d\u52a1\uff0c\u8bf7\u77e5\u6089\u3002"})}),e.access_token&&(0,$.jsx)(A.A,{xs:12,children:(0,$.jsxs)(u.A,{severity:"error",children:["\u4f60\u7684\u8bbf\u95ee\u4ee4\u724c\u662f: ",(0,$.jsx)("b",{children:e.access_token})," ",(0,$.jsx)("br",{}),"\u8bf7\u59a5\u5584\u4fdd\u7ba1\u3002\u5982\u6709\u6cc4\u6f0f\uff0c\u8bf7\u7acb\u5373\u91cd\u7f6e\u3002"]})}),(0,$.jsx)(A.A,{xs:12,children:(0,$.jsx)(h.A,{variant:"contained",onClick:async()=>{const e=await w.n.get("/api/user/token"),{success:i,message:n,data:a}=e.data;i?(t(e=>({...e,access_token:a})),(0,k.C)(a,"\u8bbf\u95ee\u4ee4\u724c")):(0,k.Qg)(n),console.log(z,T,N)},children:e.access_token?"\u91cd\u7f6e\u8bbf\u95ee\u4ee4\u724c":"\u751f\u6210\u8bbf\u95ee\u4ee4\u724c"})}),(0,$.jsx)(A.A,{xs:12,children:(0,$.jsx)(h.A,{variant:"contained",color:"error",onClick:()=>{C(!0)},children:"\u5220\u9664\u5e10\u53f7"})})]})})]})})}),(0,$.jsxs)(x.A,{open:i,onClose:()=>C(!1),maxWidth:"md",children:[(0,$.jsx)(p.A,{sx:{margin:"0px",fontWeight:500,lineHeight:"1.55556",padding:"24px",fontSize:"1.125rem"},children:"\u5371\u9669\u64cd\u4f5c"}),(0,$.jsx)(m.A,{}),(0,$.jsx)(g.A,{children:"\u60a8\u6b63\u5728\u5220\u9664\u81ea\u5df1\u7684\u5e10\u6237\uff0c\u5c06\u6e05\u7a7a\u6240\u6709\u6570\u636e\u4e14\u4e0d\u53ef\u6062\u590d"}),(0,$.jsxs)(j.A,{children:[(0,$.jsx)(h.A,{onClick:()=>C(!1),children:"\u53d6\u6d88"}),(0,$.jsx)(h.A,{sx:{color:"error.main"},onClick:async()=>{C(!1)},children:"\u786e\u5b9a"})]})]}),(0,$.jsx)(S.A,{open:F,handleClose:()=>{R(!1)},wechatLogin:async e=>{if(""!==e)try{const t=await w.n.get(`/api/oauth/wechat/bind?code=${e}`),{success:i,message:n}=t.data;return i&&(0,k.Te)("\u5fae\u4fe1\u8d26\u6237\u7ed1\u5b9a\u6210\u529f\uff01"),{success:i,message:n}}catch(t){return{success:!1,message:""}}},qrCode:N.wechat_qrcode}),(0,$.jsx)(Q,{open:H,turnstileToken:B,handleClose:()=>{P(!1)}})]})}},6853:function(e,t,i){var n=i(5043),a=i(6240),r=i(2110),s=i(9958),c=i(5865),o=i(9336),l=i(6494),d=i(579);const h=(0,n.forwardRef)(({children:e,content:t,contentClass:i,darkTitle:n,secondary:h,sx:u={},contentSX:x={},title:p,subTitle:m,...g},j)=>{const A=(0,a.A)();return(0,d.jsxs)(r.A,{ref:j,sx:{border:A.typography.SubCard.border,":hover":{boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)"},...u},...g,children:[!n&&p&&(0,d.jsx)(s.A,{sx:{p:2.5},title:(0,d.jsx)(c.A,{variant:"h5",children:p}),action:h,subheader:m}),n&&p&&(0,d.jsx)(s.A,{sx:{p:2.5},title:(0,d.jsx)(c.A,{variant:"h4",children:p}),action:h,subheader:m}),p&&(0,d.jsx)(o.A,{sx:{opacity:1}}),t&&(0,d.jsx)(l.A,{sx:{p:2.5,...x},className:i||"",children:e}),!t&&e]})});h.defaultProps={content:!0},t.A=h},7473:function(e,t,i){i.d(t,{A:function(){return g}});var n=i(1045),a=i(6446),r=i(310),s=i(2110),c=i(5043);var o=i.p+"static/media/shape-avatar.096ea8015d2d14ba4ce707d949a97823.svg",l=i.p+"static/media/cover.ce8466cd4be184bb082b.jpg",d=i(163),h=i(5173),u=i.n(h),x=i(579);const p=(0,c.forwardRef)(({src:e,sx:t,...i},n)=>(0,x.jsx)(a.A,{component:"span",className:"svg-color",ref:n,sx:{width:24,height:24,display:"inline-block",bgcolor:"currentColor",mask:`url(${e}) no-repeat center / contain`,WebkitMask:`url(${e}) no-repeat center / contain`,...t},...i}));p.propTypes={src:u().string,sx:u().object};var m=p;function g({children:e}){const t=(0,x.jsx)(m,{color:"paper",src:o,sx:{width:"100%",height:62,zIndex:10,bottom:-26,position:"absolute",color:"background.paper"}}),i=(0,x.jsx)(n.A,{src:d.A,sx:{zIndex:11,width:64,height:64,position:"absolute",alignItems:"center",marginLeft:"auto",marginRight:"auto",left:0,right:0,bottom:e=>e.spacing(-4)}}),c=(0,x.jsx)(a.A,{component:"img",src:l,sx:{top:0,width:1,height:1,objectFit:"cover",position:"absolute"}});return(0,x.jsxs)(s.A,{children:[(0,x.jsxs)(a.A,{sx:{position:"relative","&:after":{top:0,content:"''",width:"100%",height:"100%",position:"absolute",bgcolor:e=>(0,r.X4)(e.palette.primary.main,.42)},pt:{xs:"calc(100% / 3)",sm:"calc(100% / 4.66)"}},children:[t,i,c]}),(0,x.jsx)(a.A,{sx:{p:e=>e.spacing(4,3,3,3)},children:e})]})}}}]);
//# sourceMappingURL=381.ccf3d4b4.chunk.js.map