"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[871],{1673:function(e,t,r){r.d(t,{A:function(){return k}});var a=r(8587),l=r(8168),o=r(5043),n=r(8387),s=r(8610),i=r(4827),c=r(5213),d=r(4535),u=r(6803),m=r(2532),x=r(2372);function p(e){return(0,x.Ay)("MuiFormHelperText",e)}var h,v=(0,m.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),A=r(8206),y=r(579);const g=["children","className","component","disabled","error","filled","focused","margin","required","variant"],j=(0,d.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${(0,u.A)(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(({theme:e,ownerState:t})=>(0,l.A)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${v.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${v.error}`]:{color:(e.vars||e).palette.error.main}},"small"===t.size&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14}));var k=o.forwardRef(function(e,t){const r=(0,A.b)({props:e,name:"MuiFormHelperText"}),{children:o,className:d,component:m="p"}=r,x=(0,a.A)(r,g),v=(0,c.A)(),k=(0,i.A)({props:r,muiFormControl:v,states:["variant","size","disabled","error","filled","focused","required"]}),f=(0,l.A)({},r,{component:m,contained:"filled"===k.variant||"outlined"===k.variant,variant:k.variant,size:k.size,disabled:k.disabled,error:k.error,filled:k.filled,focused:k.focused,required:k.required}),b=(e=>{const{classes:t,contained:r,size:a,disabled:l,error:o,filled:n,focused:i,required:c}=e,d={root:["root",l&&"disabled",o&&"error",a&&`size${(0,u.A)(a)}`,r&&"contained",i&&"focused",n&&"filled",c&&"required"]};return(0,s.A)(d,p,t)})(f);return(0,y.jsx)(j,(0,l.A)({as:m,ownerState:f,className:(0,n.A)(b.root,d),ref:t},x,{children:" "===o?h||(h=(0,y.jsx)("span",{className:"notranslate",children:"\u200b"})):o}))})},1675:function(e,t,r){var a=r(5043),l=r(6446),o=r(6240),n=r(4535),s=r(310),i=r(579);const c=(0,a.forwardRef)(({children:e,color:t="default",variant:r="soft",startIcon:a,endIcon:n,sx:s,...c},u)=>{const m=(0,o.A)(),x={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,i.jsxs)(d,{ref:u,component:"span",ownerState:{color:t,variant:r},sx:{...a&&{pl:.75},...n&&{pr:.75},...s},theme:m,...c,children:[a&&(0,i.jsxs)(l.A,{sx:{mr:.75,...x},children:[" ",a," "]}),e,n&&(0,i.jsxs)(l.A,{sx:{ml:.75,...x},children:[" ",n," "]})]})});t.A=c;const d=(0,n.Ay)(l.A)(({theme:e,ownerState:t})=>{var r,a,l,o,n;const i="filled"===t.variant,c="outlined"===t.variant,d="soft"===t.variant,u="ghost"===t.variant,m={..."default"===t.color&&{...i&&{color:e.palette.grey[300],backgroundColor:e.palette.text.primary},...c&&{color:e.palette.grey[500],border:`2px solid ${e.palette.grey[500]}`},...d&&{color:e.palette.text.secondary,backgroundColor:(0,s.X4)(e.palette.grey[500],.16)}}},x={..."default"!==t.color&&{...i&&{color:e.palette.background.paper,backgroundColor:null===(r=e.palette[t.color])||void 0===r?void 0:r.main},...c&&{backgroundColor:"transparent",color:null===(a=e.palette[t.color])||void 0===a?void 0:a.main,border:`2px solid ${null===(l=e.palette[t.color])||void 0===l?void 0:l.main}`},...d&&{color:e.palette[t.color].dark,backgroundColor:(0,s.X4)(null===(o=e.palette[t.color])||void 0===o?void 0:o.main,.16)},...u&&{color:null===(n=e.palette[t.color])||void 0===n?void 0:n.main}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:e.spacing(0,.75),fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightBold,transition:e.transitions.create("all",{duration:e.transitions.duration.shorter}),...m,...x}})},1736:function(e,t,r){r.d(t,{re:function(){return a}});r(5512);const a=10;r(8032)},7327:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var a=r(5043),l=r(9985),o=r(1806),n=r(3460),s=r(9650),i=r(864),c=r.n(i),d=r(9090),u=r(611),m=r(1165),x=r(5263),p=r(8911),h=r(5865),v=r(2110),A=r(6446),y=r(9252),g=r(2518),j=r(8076),k=r(2420),f=r(1675);var b={0:{value:"0",text:"\u5168\u90e8",color:""},1:{value:"1",text:"\u5145\u503c",color:"primary"},2:{value:"2",text:"\u6d88\u8d39",color:"orange"},3:{value:"3",text:"\u7ba1\u7406",color:"default"},4:{value:"4",text:"\u7cfb\u7edf",color:"secondary"},5:{value:"5",text:"\u6d4b\u8bd5",color:"secondary"}},_=r(579);function w(e){const t=b[e];return t?(0,_.jsxs)(f.A,{variant:"filled",color:t.color,children:[" ",t.text," "]}):(0,_.jsxs)(f.A,{variant:"filled",color:"error",children:[" ","\u672a\u77e5"," "]})}function I({item:e,userIsAdmin:t}){return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(j.A,{tabIndex:e.id,children:[(0,_.jsx)(k.A,{children:(0,l.gA)(e.created_at)}),t&&(0,_.jsx)(k.A,{children:e.channel||""}),t&&(0,_.jsx)(k.A,{children:(0,_.jsx)(f.A,{color:"default",variant:"outlined",children:e.username})}),(0,_.jsx)(k.A,{children:e.token_name&&(0,_.jsx)(f.A,{color:"default",variant:"soft",children:e.token_name})}),(0,_.jsx)(k.A,{children:w(e.type)}),(0,_.jsx)(k.A,{children:e.model_name&&(0,_.jsx)(f.A,{color:"primary",variant:"outlined",children:e.model_name})}),(0,_.jsx)(k.A,{children:e.prompt_tokens||""}),(0,_.jsx)(k.A,{children:e.completion_tokens||""}),(0,_.jsx)(k.A,{children:e.quota?(0,l.X8)(e.quota,6):""}),(0,_.jsx)(k.A,{children:e.content})]})})}var C=r(4882);var z=({userIsAdmin:e})=>(0,_.jsx)(C.A,{children:(0,_.jsxs)(j.A,{children:[(0,_.jsx)(k.A,{children:"\u65f6\u95f4"}),e&&(0,_.jsx)(k.A,{children:"\u6e20\u9053"}),e&&(0,_.jsx)(k.A,{children:"\u7528\u6237"}),(0,_.jsx)(k.A,{children:"\u4ee4\u724c"}),(0,_.jsx)(k.A,{children:"\u7c7b\u578b"}),(0,_.jsx)(k.A,{children:"\u6a21\u578b"}),(0,_.jsx)(k.A,{children:"\u63d0\u793a"}),(0,_.jsx)(k.A,{children:"\u8865\u5168"}),(0,_.jsx)(k.A,{children:"\u989d\u5ea6"}),(0,_.jsx)(k.A,{children:"\u8be6\u60c5"})]})}),M=r(6240),P=r(6671),S=(0,r(7391).A)("brand-github-copilot","IconBrandGithubCopilot",[["path",{d:"M4 18v-5.5c0 -.667 .167 -1.333 .5 -2",key:"svg-0"}],["path",{d:"M12 7.5c0 -1 -.01 -4.07 -4 -3.5c-3.5 .5 -4 2.5 -4 3.5c0 1.5 0 4 3 4c4 0 5 -2.5 5 -4z",key:"svg-1"}],["path",{d:"M4 12c-1.333 .667 -2 1.333 -2 2c0 1 0 3 1.5 4c3 2 6.5 3 8.5 3s5.499 -1 8.5 -3c1.5 -1 1.5 -3 1.5 -4c0 -.667 -.667 -1.333 -2 -2",key:"svg-2"}],["path",{d:"M20 18v-5.5c0 -.667 -.167 -1.333 -.5 -2",key:"svg-3"}],["path",{d:"M12 7.5l0 -.297l.01 -.269l.027 -.298l.013 -.105l.033 -.215c.014 -.073 .029 -.146 .046 -.22l.06 -.223c.336 -1.118 1.262 -2.237 3.808 -1.873c2.838 .405 3.703 1.797 3.93 2.842l.036 .204c0 .033 .01 .066 .013 .098l.016 .185l0 .171l0 .49l-.015 .394l-.02 .271c-.122 1.366 -.655 2.845 -2.962 2.845c-3.256 0 -4.524 -1.656 -4.883 -3.081l-.053 -.242a3.865 3.865 0 0 1 -.036 -.235l-.021 -.227a3.518 3.518 0 0 1 -.007 -.215z",key:"svg-4"}],["path",{d:"M10 15v2",key:"svg-5"}],["path",{d:"M14 15v2",key:"svg-6"}]]),F=r(5267),R=r(7633),T=r(3193),q=r(9190),W=r(4050),G=r(1787),$=r(5174),D=r(2143),N=r(8390),O=r(8452),B=r(9302),L=r(446),H=r.n(L);function X({filterName:e,handleFilterName:t,userIsAdmin:r}){const a=(0,M.A)().palette.grey[500];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(p.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2,md:4},padding:"24px",paddingBottom:"0px",children:[(0,_.jsxs)(T.A,{children:[(0,_.jsx)(q.A,{htmlFor:"channel-token_name-label",children:"\u4ee4\u724c\u540d\u79f0"}),(0,_.jsx)(W.A,{id:"token_name",name:"token_name",sx:{minWidth:"100%"},label:"\u4ee4\u724c\u540d\u79f0",value:e.token_name,onChange:t,placeholder:"\u4ee4\u724c\u540d\u79f0",startAdornment:(0,_.jsx)(G.A,{position:"start",children:(0,_.jsx)(P.A,{stroke:1.5,size:"20px",color:a})})})]}),(0,_.jsxs)(T.A,{children:[(0,_.jsx)(q.A,{htmlFor:"channel-model_name-label",children:"\u6a21\u578b\u540d\u79f0"}),(0,_.jsx)(W.A,{id:"model_name",name:"model_name",sx:{minWidth:"100%"},label:"\u6a21\u578b\u540d\u79f0",value:e.model_name,onChange:t,placeholder:"\u6a21\u578b\u540d\u79f0",startAdornment:(0,_.jsx)(G.A,{position:"start",children:(0,_.jsx)(S,{stroke:1.5,size:"20px",color:a})})})]}),(0,_.jsx)(T.A,{children:(0,_.jsx)(N.$,{dateAdapter:B.R,adapterLocale:"zh-cn",children:(0,_.jsx)(O.K,{label:"\u8d77\u59cb\u65f6\u95f4",ampm:!1,name:"start_timestamp",value:0===e.start_timestamp?null:H().unix(e.start_timestamp),onChange:e=>{t(null!==e?{target:{name:"start_timestamp",value:e.unix()}}:{target:{name:"start_timestamp",value:0}})},slotProps:{actionBar:{actions:["clear","today","accept"]}}})})}),(0,_.jsx)(T.A,{children:(0,_.jsx)(N.$,{dateAdapter:B.R,adapterLocale:"zh-cn",children:(0,_.jsx)(O.K,{label:"\u7ed3\u675f\u65f6\u95f4",name:"end_timestamp",ampm:!1,value:0===e.end_timestamp?null:H().unix(e.end_timestamp),onChange:e=>{t(null!==e?{target:{name:"end_timestamp",value:e.unix()}}:{target:{name:"end_timestamp",value:0}})},slotProps:{actionBar:{actions:["clear","today","accept"]}}})})})]}),(0,_.jsxs)(p.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2,md:4},padding:"24px",children:[r&&(0,_.jsxs)(T.A,{children:[(0,_.jsx)(q.A,{htmlFor:"channel-channel-label",children:"\u6e20\u9053ID"}),(0,_.jsx)(W.A,{id:"channel",name:"channel",sx:{minWidth:"100%"},label:"\u6e20\u9053ID",value:e.channel,onChange:t,placeholder:"\u6e20\u9053ID",startAdornment:(0,_.jsx)(G.A,{position:"start",children:(0,_.jsx)(F.A,{stroke:1.5,size:"20px",color:a})})})]}),r&&(0,_.jsxs)(T.A,{children:[(0,_.jsx)(q.A,{htmlFor:"channel-username-label",children:"\u7528\u6237\u540d\u79f0"}),(0,_.jsx)(W.A,{id:"username",name:"username",sx:{minWidth:"100%"},label:"\u7528\u6237\u540d\u79f0",value:e.username,onChange:t,placeholder:"\u7528\u6237\u540d\u79f0",startAdornment:(0,_.jsx)(G.A,{position:"start",children:(0,_.jsx)(R.A,{stroke:1.5,size:"20px",color:a})})})]}),(0,_.jsxs)(T.A,{sx:{minWidth:"22%"},children:[(0,_.jsx)(q.A,{htmlFor:"channel-type-label",children:"\u7c7b\u578b"}),(0,_.jsx)($.A,{id:"channel-type-label",label:"\u7c7b\u578b",value:e.type,name:"type",onChange:t,sx:{minWidth:"100%"},MenuProps:{PaperProps:{style:{maxHeight:200}}},children:Object.values(b).map(e=>(0,_.jsx)(D.A,{value:e.value,children:e.text},e.value))})]})]})]})}r(6484);var K=r(3862),Q=r(1736),V=r(3991),E=r(8302);function J(){const e={p:0,username:"",token_name:"",model_name:"",start_timestamp:0,end_timestamp:(new Date).getTime()/1e3+3600,type:0,channel:""},[t,r]=(0,a.useState)([]),[i,j]=(0,a.useState)(0),[k,f]=(0,a.useState)(!1),[b,w]=(0,a.useState)(e),[C,M]=(0,a.useState)(!0),P=(0,l.qc)(),S=async e=>{f(!0);const a=P?"/api/log/":"/api/log/self/",o=b;o.p=e,P||(delete o.username,delete o.channel);const n=await K.n.get(a,{params:o}),{success:s,message:i,data:c}=n.data;if(s)if(0===e)r(c);else{let a=[...t];a.splice(e*Q.re,c.length,...c),r(a)}else(0,l.Qg)(i);f(!1)},F=async e=>{e.preventDefault(),await S(0),j(0)};return(0,a.useEffect)(()=>{w(e),j(0),S(0).then().catch(e=>{(0,l.Qg)(e)}),M(!1)},[C]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:2.5,children:(0,_.jsx)(h.A,{variant:"h4",children:"\u65e5\u5fd7"})}),(0,_.jsxs)(v.A,{children:[(0,_.jsx)(A.A,{component:"form",onSubmit:F,noValidate:!0,sx:{marginTop:2},children:(0,_.jsx)(X,{filterName:b,handleFilterName:e=>{w({...b,[e.target.name]:e.target.value})},userIsAdmin:P})}),(0,_.jsx)(x.A,{sx:{textAlign:"right",height:50,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,_.jsx)(y.A,{children:(0,_.jsxs)(m.A,{variant:"outlined","aria-label":"outlined small primary button group",sx:{marginBottom:2},children:[(0,_.jsx)(g.A,{onClick:()=>{M(!0)},startIcon:(0,_.jsx)(V.A,{width:"18px"}),children:"\u5237\u65b0/\u6e05\u9664\u641c\u7d22\u6761\u4ef6"}),(0,_.jsx)(g.A,{onClick:F,startIcon:(0,_.jsx)(E.A,{width:"18px"}),children:"\u641c\u7d22"})]})})}),k&&(0,_.jsx)(u.A,{}),(0,_.jsx)(c(),{component:"div",children:(0,_.jsx)(s.A,{sx:{overflow:"unset"},children:(0,_.jsxs)(o.A,{sx:{minWidth:800},children:[(0,_.jsx)(z,{userIsAdmin:P}),(0,_.jsx)(n.A,{children:t.slice(i*Q.re,(i+1)*Q.re).map((e,t)=>(0,_.jsx)(I,{item:e,userIsAdmin:P},`${e.id}_${t}`))})]})})}),(0,_.jsx)(d.A,{page:i,component:"div",count:t.length+(t.length%Q.re===0?1:0),rowsPerPage:Q.re,onPageChange:(e,r)=>{(async()=>{r===Math.ceil(t.length/Q.re)&&await S(r),j(r)})()},rowsPerPageOptions:[Q.re]})]})]})}},8032:function(e,t,r){r.d(t,{p:function(){return a}});const a={1:{key:1,text:"OpenAI",value:1,color:"success"},14:{key:14,text:"Anthropic Claude",value:14,color:"primary"},33:{key:33,text:"AWS",value:33,color:"primary"},37:{key:37,text:"Cloudflare",value:37,color:"success"},3:{key:3,text:"Azure OpenAI",value:3,color:"success"},11:{key:11,text:"Google PaLM2",value:11,color:"warning"},24:{key:24,text:"Google Gemini",value:24,color:"warning"},28:{key:28,text:"Mistral AI",value:28,color:"warning"},40:{key:40,text:"\u5b57\u8282\u706b\u5c71\u5f15\u64ce",value:40,color:"primary"},15:{key:15,text:"\u767e\u5ea6\u6587\u5fc3\u5343\u5e06",value:15,color:"primary"},17:{key:17,text:"\u963f\u91cc\u901a\u4e49\u5343\u95ee",value:17,color:"primary"},18:{key:18,text:"\u8baf\u98de\u661f\u706b\u8ba4\u77e5",value:18,color:"primary"},16:{key:16,text:"\u667a\u8c31 ChatGLM",value:16,color:"primary"},19:{key:19,text:"360 \u667a\u8111",value:19,color:"primary"},25:{key:25,text:"Moonshot AI",value:25,color:"primary"},23:{key:23,text:"\u817e\u8baf\u6df7\u5143",value:23,color:"primary"},26:{key:26,text:"\u767e\u5ddd\u5927\u6a21\u578b",value:26,color:"primary"},27:{key:27,text:"MiniMax",value:27,color:"primary"},29:{key:29,text:"Groq",value:29,color:"primary"},30:{key:30,text:"Ollama",value:30,color:"primary"},31:{key:31,text:"\u96f6\u4e00\u4e07\u7269",value:31,color:"primary"},32:{key:32,text:"\u9636\u8dc3\u661f\u8fb0",value:32,color:"primary"},34:{key:34,text:"Coze",value:34,color:"primary"},35:{key:35,text:"Cohere",value:35,color:"primary"},36:{key:36,text:"DeepSeek",value:36,color:"primary"},38:{key:38,text:"DeepL",value:38,color:"primary"},39:{key:39,text:"together.ai",value:39,color:"primary"},42:{key:42,text:"VertexAI",value:42,color:"primary"},43:{key:43,text:"Proxy",value:43,color:"primary"},44:{key:44,text:"SiliconFlow",value:44,color:"primary"},45:{key:45,text:"xAI",value:45,color:"primary"},45:{key:46,text:"Replicate",value:46,color:"primary"},41:{key:41,text:"Novita",value:41,color:"purple"},8:{key:8,text:"\u81ea\u5b9a\u4e49\u6e20\u9053",value:8,color:"error"},22:{key:22,text:"\u77e5\u8bc6\u5e93\uff1aFastGPT",value:22,color:"success"},21:{key:21,text:"\u77e5\u8bc6\u5e93\uff1aAI Proxy",value:21,color:"success"},20:{key:20,text:"OpenRouter",value:20,color:"success"},2:{key:2,text:"\u4ee3\u7406\uff1aAPI2D",value:2,color:"success"},5:{key:5,text:"\u4ee3\u7406\uff1aOpenAI-SB",value:5,color:"success"},7:{key:7,text:"\u4ee3\u7406\uff1aOhMyGPT",value:7,color:"success"},10:{key:10,text:"\u4ee3\u7406\uff1aAI Proxy",value:10,color:"success"},4:{key:4,text:"\u4ee3\u7406\uff1aCloseAI",value:4,color:"success"},6:{key:6,text:"\u4ee3\u7406\uff1aOpenAI Max",value:6,color:"success"},9:{key:9,text:"\u4ee3\u7406\uff1aAI.LS",value:9,color:"success"},12:{key:12,text:"\u4ee3\u7406\uff1aAPI2GPT",value:12,color:"success"},13:{key:13,text:"\u4ee3\u7406\uff1aAIGC2D",value:13,color:"success"}}}}]);
//# sourceMappingURL=871.e2cecc6d.chunk.js.map