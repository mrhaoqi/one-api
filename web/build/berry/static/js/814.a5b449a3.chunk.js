"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[814],{6853:function(e,n,i){var t=i(5043),a=i(6240),l=i(2110),s=i(9958),r=i(5865),d=i(9336),o=i(6494),c=i(579);const h=(0,t.forwardRef)(({children:e,content:n,contentClass:i,darkTitle:t,secondary:h,sx:u={},contentSX:x={},title:A,subTitle:m,...j},p)=>{const C=(0,a.A)();return(0,c.jsxs)(l.A,{ref:p,sx:{border:C.typography.SubCard.border,":hover":{boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)"},...u},...j,children:[!t&&A&&(0,c.jsx)(s.A,{sx:{p:2.5},title:(0,c.jsx)(r.A,{variant:"h5",children:A}),action:h,subheader:m}),t&&A&&(0,c.jsx)(s.A,{sx:{p:2.5},title:(0,c.jsx)(r.A,{variant:"h4",children:A}),action:h,subheader:m}),A&&(0,c.jsx)(d.A,{sx:{opacity:1}}),n&&(0,c.jsx)(o.A,{sx:{p:2.5,...x},className:i||"",children:e}),!n&&e]})});h.defaultProps={content:!0},n.A=h},9814:function(e,n,i){i.r(n),i.d(n,{default:function(){return _}});var t=i(5043),a=i(6446),l=i(2110),s=i(9013),r=i(4056),d=i(2687),o=i(3699),c=i(5157),h=i(6853),u=i(8911),x=i(3193),A=i(9190),m=i(4050),j=i(4605),p=i(1962),C=i(2518),b=i(7784),g=i(9985),S=i(3862),T=i(9302),v=i(8390),k=i(8452),f=i(446),w=i.n(f),P=i(579);i(6484);var W=()=>{let e=new Date,[n,i]=(0,t.useState)({QuotaForNewUser:0,QuotaForInviter:0,QuotaForInvitee:0,QuotaRemindThreshold:0,PreConsumedQuota:0,ModelRatio:"",CompletionRatio:"",GroupRatio:"",TopUpLink:"",ChatLink:"",QuotaPerUnit:0,AutomaticDisableChannelEnabled:"",AutomaticEnableChannelEnabled:"",ChannelDisableThreshold:0,LogConsumeEnabled:"",DisplayInCurrencyEnabled:"",DisplayTokenStatEnabled:"",ApproximateTokenEnabled:"",RetryTimes:0});const[a,l]=(0,t.useState)({});let[s,r]=(0,t.useState)(!1),[d,o]=(0,t.useState)(e.getTime()/1e3-2592e3);(0,t.useEffect)(()=>{(async()=>{const e=await S.n.get("/api/option/"),{success:n,message:t,data:a}=e.data;if(n){let e={};a.forEach(n=>{"ModelRatio"!==n.key&&"GroupRatio"!==n.key&&"CompletionRatio"!==n.key||(n.value=JSON.stringify(JSON.parse(n.value),null,2)),"{}"===n.value&&(n.value=""),e[n.key]=n.value}),i(e),l(e)}else(0,g.Qg)(t)})().then()},[]);const c=async(e,t)=>{r(!0),e.endsWith("Enabled")&&(t="true"===n[e]?"false":"true");const a=await S.n.put("/api/option/",{key:e,value:t}),{success:l,message:s}=a.data;l?i(n=>({...n,[e]:t})):(0,g.Qg)(s),r(!1)},f=async e=>{let{name:n,value:t}=e.target;n.endsWith("Enabled")?(await c(n,t),(0,g.Te)("\u8bbe\u7f6e\u6210\u529f\uff01")):i(e=>({...e,[n]:t}))},W=async e=>{switch(e){case"monitor":a.ChannelDisableThreshold!==n.ChannelDisableThreshold&&await c("ChannelDisableThreshold",n.ChannelDisableThreshold),a.QuotaRemindThreshold!==n.QuotaRemindThreshold&&await c("QuotaRemindThreshold",n.QuotaRemindThreshold);break;case"ratio":if(a.ModelRatio!==n.ModelRatio){if(!(0,g.oM)(n.ModelRatio))return void(0,g.Qg)("\u6a21\u578b\u500d\u7387\u4e0d\u662f\u5408\u6cd5\u7684 JSON \u5b57\u7b26\u4e32");await c("ModelRatio",n.ModelRatio)}if(a.GroupRatio!==n.GroupRatio){if(!(0,g.oM)(n.GroupRatio))return void(0,g.Qg)("\u5206\u7ec4\u500d\u7387\u4e0d\u662f\u5408\u6cd5\u7684 JSON \u5b57\u7b26\u4e32");await c("GroupRatio",n.GroupRatio)}if(a.CompletionRatio!==n.CompletionRatio){if(!(0,g.oM)(n.CompletionRatio))return void(0,g.Qg)("\u8865\u5168\u500d\u7387\u4e0d\u662f\u5408\u6cd5\u7684 JSON \u5b57\u7b26\u4e32");await c("CompletionRatio",n.CompletionRatio)}break;case"quota":a.QuotaForNewUser!==n.QuotaForNewUser&&await c("QuotaForNewUser",n.QuotaForNewUser),a.QuotaForInvitee!==n.QuotaForInvitee&&await c("QuotaForInvitee",n.QuotaForInvitee),a.QuotaForInviter!==n.QuotaForInviter&&await c("QuotaForInviter",n.QuotaForInviter),a.PreConsumedQuota!==n.PreConsumedQuota&&await c("PreConsumedQuota",n.PreConsumedQuota);break;case"general":a.TopUpLink!==n.TopUpLink&&await c("TopUpLink",n.TopUpLink),a.ChatLink!==n.ChatLink&&await c("ChatLink",n.ChatLink),a.QuotaPerUnit!==n.QuotaPerUnit&&await c("QuotaPerUnit",n.QuotaPerUnit),a.RetryTimes!==n.RetryTimes&&await c("RetryTimes",n.RetryTimes)}(0,g.Te)("\u4fdd\u5b58\u6210\u529f\uff01")};return(0,P.jsxs)(u.A,{spacing:2,children:[(0,P.jsx)(h.A,{title:"\u901a\u7528\u8bbe\u7f6e",children:(0,P.jsxs)(u.A,{justifyContent:"flex-start",alignItems:"flex-start",spacing:2,children:[(0,P.jsxs)(u.A,{direction:{sm:"column",md:"row"},spacing:{xs:3,sm:2,md:4},children:[(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"TopUpLink",children:"\u5145\u503c\u94fe\u63a5"}),(0,P.jsx)(m.A,{id:"TopUpLink",name:"TopUpLink",value:n.TopUpLink,onChange:f,label:"\u5145\u503c\u94fe\u63a5",placeholder:"\u4f8b\u5982\u53d1\u5361\u7f51\u7ad9\u7684\u8d2d\u4e70\u94fe\u63a5",disabled:s})]}),(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"ChatLink",children:"\u804a\u5929\u94fe\u63a5"}),(0,P.jsx)(m.A,{id:"ChatLink",name:"ChatLink",value:n.ChatLink,onChange:f,label:"\u804a\u5929\u94fe\u63a5",placeholder:"\u4f8b\u5982 ChatGPT Next Web \u7684\u90e8\u7f72\u5730\u5740",disabled:s})]}),(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"QuotaPerUnit",children:"\u5355\u4f4d\u989d\u5ea6"}),(0,P.jsx)(m.A,{id:"QuotaPerUnit",name:"QuotaPerUnit",value:n.QuotaPerUnit,onChange:f,label:"\u5355\u4f4d\u989d\u5ea6",placeholder:"\u4e00\u5355\u4f4d\u8d27\u5e01\u80fd\u5151\u6362\u7684\u989d\u5ea6",disabled:s})]}),(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"RetryTimes",children:"\u91cd\u8bd5\u6b21\u6570"}),(0,P.jsx)(m.A,{id:"RetryTimes",name:"RetryTimes",value:n.RetryTimes,onChange:f,label:"\u91cd\u8bd5\u6b21\u6570",placeholder:"\u91cd\u8bd5\u6b21\u6570",disabled:s})]})]}),(0,P.jsxs)(u.A,{direction:{sm:"column",md:"row"},spacing:{xs:3,sm:2,md:4},justifyContent:"flex-start",alignItems:"flex-start",children:[(0,P.jsx)(j.A,{sx:{marginLeft:"0px"},label:"\u4ee5\u8d27\u5e01\u5f62\u5f0f\u663e\u793a\u989d\u5ea6",control:(0,P.jsx)(p.A,{checked:"true"===n.DisplayInCurrencyEnabled,onChange:f,name:"DisplayInCurrencyEnabled"})}),(0,P.jsx)(j.A,{label:"Billing \u76f8\u5173 API \u663e\u793a\u4ee4\u724c\u989d\u5ea6\u800c\u975e\u7528\u6237\u989d\u5ea6",control:(0,P.jsx)(p.A,{checked:"true"===n.DisplayTokenStatEnabled,onChange:f,name:"DisplayTokenStatEnabled"})}),(0,P.jsx)(j.A,{label:"\u4f7f\u7528\u8fd1\u4f3c\u7684\u65b9\u5f0f\u4f30\u7b97 token \u6570\u4ee5\u51cf\u5c11\u8ba1\u7b97\u91cf",control:(0,P.jsx)(p.A,{checked:"true"===n.ApproximateTokenEnabled,onChange:f,name:"ApproximateTokenEnabled"})})]}),(0,P.jsx)(C.A,{variant:"contained",onClick:()=>{W("general").then()},children:"\u4fdd\u5b58\u901a\u7528\u8bbe\u7f6e"})]})}),(0,P.jsx)(h.A,{title:"\u65e5\u5fd7\u8bbe\u7f6e",children:(0,P.jsxs)(u.A,{direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:2,children:[(0,P.jsx)(j.A,{label:"\u542f\u7528\u65e5\u5fd7\u6d88\u8d39",control:(0,P.jsx)(p.A,{checked:"true"===n.LogConsumeEnabled,onChange:f,name:"LogConsumeEnabled"})}),(0,P.jsx)(x.A,{children:(0,P.jsx)(v.$,{dateAdapter:T.R,adapterLocale:"zh-cn",children:(0,P.jsx)(k.K,{label:"\u65e5\u5fd7\u6e05\u7406\u65f6\u95f4",placeholder:"\u65e5\u5fd7\u6e05\u7406\u65f6\u95f4",ampm:!1,name:"historyTimestamp",value:null===d?null:w().unix(d),disabled:s,onChange:e=>{o(null===e?null:e.unix())},slotProps:{actionBar:{actions:["today","clear","accept"]}}})})}),(0,P.jsx)(C.A,{variant:"contained",onClick:()=>{(async()=>{const e=await S.n.delete(`/api/log/?target_timestamp=${Math.floor(d)}`),{success:n,message:i,data:t}=e.data;n?(0,g.Te)(`${t} \u6761\u65e5\u5fd7\u5df2\u6e05\u7406\uff01`):(0,g.Qg)("\u65e5\u5fd7\u6e05\u7406\u5931\u8d25\uff1a"+i)})().then()},children:"\u6e05\u7406\u5386\u53f2\u65e5\u5fd7"})]})}),(0,P.jsx)(h.A,{title:"\u76d1\u63a7\u8bbe\u7f6e",children:(0,P.jsxs)(u.A,{justifyContent:"flex-start",alignItems:"flex-start",spacing:2,children:[(0,P.jsxs)(u.A,{direction:{sm:"column",md:"row"},spacing:{xs:3,sm:2,md:4},children:[(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"ChannelDisableThreshold",children:"\u6700\u957f\u54cd\u5e94\u65f6\u95f4"}),(0,P.jsx)(m.A,{id:"ChannelDisableThreshold",name:"ChannelDisableThreshold",type:"number",value:n.ChannelDisableThreshold,onChange:f,label:"\u6700\u957f\u54cd\u5e94\u65f6\u95f4",placeholder:"\u5355\u4f4d\u79d2\uff0c\u5f53\u8fd0\u884c\u6e20\u9053\u5168\u90e8\u6d4b\u8bd5\u65f6\uff0c\u8d85\u8fc7\u6b64\u65f6\u95f4\u5c06\u81ea\u52a8\u7981\u7528\u6e20\u9053",disabled:s})]}),(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"QuotaRemindThreshold",children:"\u989d\u5ea6\u63d0\u9192\u9608\u503c"}),(0,P.jsx)(m.A,{id:"QuotaRemindThreshold",name:"QuotaRemindThreshold",type:"number",value:n.QuotaRemindThreshold,onChange:f,label:"\u989d\u5ea6\u63d0\u9192\u9608\u503c",placeholder:"\u4f4e\u4e8e\u6b64\u989d\u5ea6\u65f6\u5c06\u53d1\u9001\u90ae\u4ef6\u63d0\u9192\u7528\u6237",disabled:s})]})]}),(0,P.jsx)(j.A,{label:"\u5931\u8d25\u65f6\u81ea\u52a8\u7981\u7528\u6e20\u9053",control:(0,P.jsx)(p.A,{checked:"true"===n.AutomaticDisableChannelEnabled,onChange:f,name:"AutomaticDisableChannelEnabled"})}),(0,P.jsx)(j.A,{label:"\u6210\u529f\u65f6\u81ea\u52a8\u542f\u7528\u6e20\u9053",control:(0,P.jsx)(p.A,{checked:"true"===n.AutomaticEnableChannelEnabled,onChange:f,name:"AutomaticEnableChannelEnabled"})}),(0,P.jsx)(C.A,{variant:"contained",onClick:()=>{W("monitor").then()},children:"\u4fdd\u5b58\u76d1\u63a7\u8bbe\u7f6e"})]})}),(0,P.jsx)(h.A,{title:"\u989d\u5ea6\u8bbe\u7f6e",children:(0,P.jsxs)(u.A,{justifyContent:"flex-start",alignItems:"flex-start",spacing:2,children:[(0,P.jsxs)(u.A,{direction:{sm:"column",md:"row"},spacing:{xs:3,sm:2,md:4},children:[(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"QuotaForNewUser",children:"\u65b0\u7528\u6237\u521d\u59cb\u989d\u5ea6"}),(0,P.jsx)(m.A,{id:"QuotaForNewUser",name:"QuotaForNewUser",type:"number",value:n.QuotaForNewUser,onChange:f,label:"\u65b0\u7528\u6237\u521d\u59cb\u989d\u5ea6",placeholder:"\u4f8b\u5982\uff1a100",disabled:s})]}),(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"PreConsumedQuota",children:"\u8bf7\u6c42\u9884\u6263\u8d39\u989d\u5ea6"}),(0,P.jsx)(m.A,{id:"PreConsumedQuota",name:"PreConsumedQuota",type:"number",value:n.PreConsumedQuota,onChange:f,label:"\u8bf7\u6c42\u9884\u6263\u8d39\u989d\u5ea6",placeholder:"\u8bf7\u6c42\u7ed3\u675f\u540e\u591a\u9000\u5c11\u8865",disabled:s})]}),(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"QuotaForInviter",children:"\u9080\u8bf7\u65b0\u7528\u6237\u5956\u52b1\u989d\u5ea6"}),(0,P.jsx)(m.A,{id:"QuotaForInviter",name:"QuotaForInviter",type:"number",label:"\u9080\u8bf7\u65b0\u7528\u6237\u5956\u52b1\u989d\u5ea6",value:n.QuotaForInviter,onChange:f,placeholder:"\u4f8b\u5982\uff1a2000",disabled:s})]}),(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"QuotaForInvitee",children:"\u65b0\u7528\u6237\u4f7f\u7528\u9080\u8bf7\u7801\u5956\u52b1\u989d\u5ea6"}),(0,P.jsx)(m.A,{id:"QuotaForInvitee",name:"QuotaForInvitee",type:"number",label:"\u65b0\u7528\u6237\u4f7f\u7528\u9080\u8bf7\u7801\u5956\u52b1\u989d\u5ea6",value:n.QuotaForInvitee,onChange:f,autoComplete:"new-password",placeholder:"\u4f8b\u5982\uff1a1000",disabled:s})]})]}),(0,P.jsx)(C.A,{variant:"contained",onClick:()=>{W("quota").then()},children:"\u4fdd\u5b58\u989d\u5ea6\u8bbe\u7f6e"})]})}),(0,P.jsx)(h.A,{title:"\u500d\u7387\u8bbe\u7f6e",children:(0,P.jsxs)(u.A,{justifyContent:"flex-start",alignItems:"flex-start",spacing:2,children:[(0,P.jsx)(x.A,{fullWidth:!0,children:(0,P.jsx)(b.A,{multiline:!0,maxRows:15,id:"channel-ModelRatio-label",label:"\u6a21\u578b\u500d\u7387",value:n.ModelRatio,name:"ModelRatio",onChange:f,"aria-describedby":"helper-text-channel-ModelRatio-label",minRows:5,placeholder:"\u4e3a\u4e00\u4e2a JSON \u6587\u672c\uff0c\u952e\u4e3a\u6a21\u578b\u540d\u79f0\uff0c\u503c\u4e3a\u500d\u7387"})}),(0,P.jsx)(x.A,{fullWidth:!0,children:(0,P.jsx)(b.A,{multiline:!0,maxRows:15,id:"channel-CompletionRatio-label",label:"\u8865\u5168\u500d\u7387",value:n.CompletionRatio,name:"CompletionRatio",onChange:f,"aria-describedby":"helper-text-channel-CompletionRatio-label",minRows:5,placeholder:"\u4e3a\u4e00\u4e2a JSON \u6587\u672c\uff0c\u952e\u4e3a\u6a21\u578b\u540d\u79f0\uff0c\u503c\u4e3a\u500d\u7387\uff0c\u6b64\u5904\u7684\u500d\u7387\u8bbe\u7f6e\u662f\u6a21\u578b\u8865\u5168\u500d\u7387\u76f8\u8f83\u4e8e\u63d0\u793a\u500d\u7387\u7684\u6bd4\u4f8b\uff0c\u4f7f\u7528\u8be5\u8bbe\u7f6e\u53ef\u5f3a\u5236\u8986\u76d6 One API \u7684\u5185\u90e8\u6bd4\u4f8b"})}),(0,P.jsx)(x.A,{fullWidth:!0,children:(0,P.jsx)(b.A,{multiline:!0,maxRows:15,id:"channel-GroupRatio-label",label:"\u5206\u7ec4\u500d\u7387",value:n.GroupRatio,name:"GroupRatio",onChange:f,"aria-describedby":"helper-text-channel-GroupRatio-label",minRows:5,placeholder:"\u4e3a\u4e00\u4e2a JSON \u6587\u672c\uff0c\u952e\u4e3a\u5206\u7ec4\u540d\u79f0\uff0c\u503c\u4e3a\u500d\u7387"})}),(0,P.jsx)(C.A,{variant:"contained",onClick:()=>{W("ratio").then()},children:"\u4fdd\u5b58\u500d\u7387\u8bbe\u7f6e"})]})})]})},E=i(8624),y=i(7254),M=i(1081),O=i(6600),R=i(9336),I=i(5316),L=i(9347),F=i(2075);const Q=(0,i(5936).Z)();var U=()=>{let[e,n]=(0,t.useState)({PasswordLoginEnabled:"",PasswordRegisterEnabled:"",EmailVerificationEnabled:"",GitHubOAuthEnabled:"",GitHubClientId:"",GitHubClientSecret:"",LarkClientId:"",LarkClientSecret:"",OidcEnabled:"",OidcWellKnown:"",OidcClientId:"",OidcClientSecret:"",OidcAuthorizationEndpoint:"",OidcTokenEndpoint:"",OidcUserinfoEndpoint:"",Notice:"",SMTPServer:"",SMTPPort:"",SMTPAccount:"",SMTPFrom:"",SMTPToken:"",ServerAddress:"",Footer:"",WeChatAuthEnabled:"",WeChatServerAddress:"",WeChatServerToken:"",WeChatAccountQRCodeImageURL:"",TurnstileCheckEnabled:"",TurnstileSiteKey:"",TurnstileSecretKey:"",RegisterEnabled:"",EmailDomainRestrictionEnabled:"",EmailDomainWhitelist:[],MessagePusherAddress:"",MessagePusherToken:""});const[i,a]=(0,t.useState)({});let[l,s]=(0,t.useState)(!1);const[r,d]=(0,t.useState)([]),[o,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{const e=await S.n.get("/api/option/"),{success:i,message:t,data:l}=e.data;if(i){let e={};l.forEach(n=>{e[n.key]=n.value}),n({...e,EmailDomainWhitelist:e.EmailDomainWhitelist.split(",")}),a(e),d(e.EmailDomainWhitelist.split(","))}else(0,g.Qg)(t)})().then()},[]);const T=async(i,t)=>{switch(s(!0),i){case"PasswordLoginEnabled":case"PasswordRegisterEnabled":case"EmailVerificationEnabled":case"GitHubOAuthEnabled":case"WeChatAuthEnabled":case"TurnstileCheckEnabled":case"EmailDomainRestrictionEnabled":case"RegisterEnabled":case"OidcEnabled":t="true"===e[i]?"false":"true"}const a=await S.n.put("/api/option/",{key:i,value:t}),{success:l,message:r}=a.data;l?("EmailDomainWhitelist"===i&&(t=t.split(",")),n(e=>({...e,[i]:t})),(0,g.Te)("\u8bbe\u7f6e\u6210\u529f\uff01")):(0,g.Qg)(r),s(!1)},v=async i=>{let{name:t,value:a}=i.target;"PasswordLoginEnabled"!==t||"true"!==e[t]?"Notice"===t||t.startsWith("SMTP")||"ServerAddress"===t||"GitHubClientId"===t||"GitHubClientSecret"===t||"WeChatServerAddress"===t||"WeChatServerToken"===t||"WeChatAccountQRCodeImageURL"===t||"TurnstileSiteKey"===t||"TurnstileSecretKey"===t||"EmailDomainWhitelist"===t||"MessagePusherAddress"===t||"MessagePusherToken"===t||"LarkClientId"===t||"LarkClientSecret"===t||"OidcClientId"===t||"OidcClientSecret"===t||"OidcWellKnown"===t||"OidcAuthorizationEndpoint"===t||"OidcTokenEndpoint"===t||"OidcUserinfoEndpoint"===t?n(e=>({...e,[t]:a})):await T(t,a):c(!0)};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(u.A,{spacing:2,children:[(0,P.jsx)(h.A,{title:"\u901a\u7528\u8bbe\u7f6e",children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"ServerAddress",children:"\u670d\u52a1\u5668\u5730\u5740"}),(0,P.jsx)(m.A,{id:"ServerAddress",name:"ServerAddress",value:e.ServerAddress||"",onChange:v,label:"\u670d\u52a1\u5668\u5730\u5740",placeholder:"\u4f8b\u5982\uff1ahttps://yourdomain.com",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{let n=(0,g.UC)(e.ServerAddress);await T("ServerAddress",n)},children:"\u66f4\u65b0\u670d\u52a1\u5668\u5730\u5740"})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e\u767b\u5f55\u6ce8\u518c",children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,md:3,children:(0,P.jsx)(j.A,{label:"\u5141\u8bb8\u901a\u8fc7\u5bc6\u7801\u8fdb\u884c\u767b\u5f55",control:(0,P.jsx)(p.A,{checked:"true"===e.PasswordLoginEnabled,onChange:v,name:"PasswordLoginEnabled"})})}),(0,P.jsx)(F.A,{xs:12,md:3,children:(0,P.jsx)(j.A,{label:"\u5141\u8bb8\u901a\u8fc7\u5bc6\u7801\u8fdb\u884c\u6ce8\u518c",control:(0,P.jsx)(p.A,{checked:"true"===e.PasswordRegisterEnabled,onChange:v,name:"PasswordRegisterEnabled"})})}),(0,P.jsx)(F.A,{xs:12,md:3,children:(0,P.jsx)(j.A,{label:"\u901a\u8fc7\u5bc6\u7801\u6ce8\u518c\u65f6\u9700\u8981\u8fdb\u884c\u90ae\u7bb1\u9a8c\u8bc1",control:(0,P.jsx)(p.A,{checked:"true"===e.EmailVerificationEnabled,onChange:v,name:"EmailVerificationEnabled"})})}),(0,P.jsx)(F.A,{xs:12,md:3,children:(0,P.jsx)(j.A,{label:"\u5141\u8bb8\u901a\u8fc7 GitHub \u8d26\u6237\u767b\u5f55 & \u6ce8\u518c",control:(0,P.jsx)(p.A,{checked:"true"===e.GitHubOAuthEnabled,onChange:v,name:"GitHubOAuthEnabled"})})}),(0,P.jsx)(F.A,{xs:12,md:3,children:(0,P.jsx)(j.A,{label:"\u5141\u8bb8\u901a\u8fc7 OIDC \u767b\u5f55 & \u6ce8\u518c",control:(0,P.jsx)(p.A,{checked:"true"===e.OidcEnabled,onChange:v,name:"OidcEnabled"})})}),(0,P.jsx)(F.A,{xs:12,md:3,children:(0,P.jsx)(j.A,{label:"\u5141\u8bb8\u901a\u8fc7\u5fae\u4fe1\u767b\u5f55 & \u6ce8\u518c",control:(0,P.jsx)(p.A,{checked:"true"===e.WeChatAuthEnabled,onChange:v,name:"WeChatAuthEnabled"})})}),(0,P.jsx)(F.A,{xs:12,md:3,children:(0,P.jsx)(j.A,{label:"\u5141\u8bb8\u65b0\u7528\u6237\u6ce8\u518c\uff08\u6b64\u9879\u4e3a\u5426\u65f6\uff0c\u65b0\u7528\u6237\u5c06\u65e0\u6cd5\u4ee5\u4efb\u4f55\u65b9\u5f0f\u8fdb\u884c\u6ce8\u518c\uff09",control:(0,P.jsx)(p.A,{checked:"true"===e.RegisterEnabled,onChange:v,name:"RegisterEnabled"})})}),(0,P.jsx)(F.A,{xs:12,md:3,children:(0,P.jsx)(j.A,{label:"\u542f\u7528 Turnstile \u7528\u6237\u6821\u9a8c",control:(0,P.jsx)(p.A,{checked:"true"===e.TurnstileCheckEnabled,onChange:v,name:"TurnstileCheckEnabled"})})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e\u90ae\u7bb1\u57df\u540d\u767d\u540d\u5355",subTitle:"\u7528\u4ee5\u9632\u6b62\u6076\u610f\u7528\u6237\u5229\u7528\u4e34\u65f6\u90ae\u7bb1\u6279\u91cf\u6ce8\u518c",children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(j.A,{label:"\u542f\u7528\u90ae\u7bb1\u57df\u540d\u767d\u540d\u5355",control:(0,P.jsx)(p.A,{checked:"true"===e.EmailDomainRestrictionEnabled,onChange:v,name:"EmailDomainRestrictionEnabled"})})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(x.A,{fullWidth:!0,children:(0,P.jsx)(E.A,{multiple:!0,freeSolo:!0,id:"EmailDomainWhitelist",options:r,value:e.EmailDomainWhitelist,onChange:(e,n)=>{v({target:{name:"EmailDomainWhitelist",value:n}})},filterSelectedOptions:!0,renderInput:e=>(0,P.jsx)(b.A,{...e,name:"EmailDomainWhitelist",label:"\u5141\u8bb8\u7684\u90ae\u7bb1\u57df\u540d"}),filterOptions:(e,n)=>{const i=Q(e,n),{inputValue:t}=n,a=e.some(e=>t===e);return""===t||a||i.push(t),i}})})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{await T("EmailDomainWhitelist",e.EmailDomainWhitelist.join(","))},children:"\u4fdd\u5b58\u90ae\u7bb1\u57df\u540d\u767d\u540d\u5355\u8bbe\u7f6e"})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e SMTP",subTitle:"\u7528\u4ee5\u652f\u6301\u7cfb\u7edf\u7684\u90ae\u4ef6\u53d1\u9001",children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,md:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"SMTPServer",children:"SMTP \u670d\u52a1\u5668\u5730\u5740"}),(0,P.jsx)(m.A,{id:"SMTPServer",name:"SMTPServer",value:e.SMTPServer||"",onChange:v,label:"SMTP \u670d\u52a1\u5668\u5730\u5740",placeholder:"\u4f8b\u5982\uff1asmtp.qq.com",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"SMTPPort",children:"SMTP \u7aef\u53e3"}),(0,P.jsx)(m.A,{id:"SMTPPort",name:"SMTPPort",value:e.SMTPPort||"",onChange:v,label:"SMTP \u7aef\u53e3",placeholder:"\u9ed8\u8ba4: 587",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"SMTPAccount",children:"SMTP \u8d26\u6237"}),(0,P.jsx)(m.A,{id:"SMTPAccount",name:"SMTPAccount",value:e.SMTPAccount||"",onChange:v,label:"SMTP \u8d26\u6237",placeholder:"\u901a\u5e38\u662f\u90ae\u7bb1\u5730\u5740",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"SMTPFrom",children:"SMTP \u53d1\u9001\u8005\u90ae\u7bb1"}),(0,P.jsx)(m.A,{id:"SMTPFrom",name:"SMTPFrom",value:e.SMTPFrom||"",onChange:v,label:"SMTP \u53d1\u9001\u8005\u90ae\u7bb1",placeholder:"\u901a\u5e38\u548c\u90ae\u7bb1\u5730\u5740\u4fdd\u6301\u4e00\u81f4",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"SMTPToken",children:"SMTP \u8bbf\u95ee\u51ed\u8bc1"}),(0,P.jsx)(m.A,{id:"SMTPToken",name:"SMTPToken",value:e.SMTPToken||"",onChange:v,label:"SMTP \u8bbf\u95ee\u51ed\u8bc1",placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{i.SMTPServer!==e.SMTPServer&&await T("SMTPServer",e.SMTPServer),i.SMTPAccount!==e.SMTPAccount&&await T("SMTPAccount",e.SMTPAccount),i.SMTPFrom!==e.SMTPFrom&&await T("SMTPFrom",e.SMTPFrom),i.SMTPPort!==e.SMTPPort&&""!==e.SMTPPort&&await T("SMTPPort",e.SMTPPort),i.SMTPToken!==e.SMTPToken&&""!==e.SMTPToken&&await T("SMTPToken",e.SMTPToken)},children:"\u4fdd\u5b58 SMTP \u8bbe\u7f6e"})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e GitHub OAuth App",subTitle:(0,P.jsxs)("span",{children:[" ","\u7528\u4ee5\u652f\u6301\u901a\u8fc7 GitHub \u8fdb\u884c\u767b\u5f55\u6ce8\u518c\uff0c",(0,P.jsx)("a",{href:"https://github.com/settings/developers",target:"_blank",rel:"noopener noreferrer",children:"\u70b9\u51fb\u6b64\u5904"}),"\u7ba1\u7406\u4f60\u7684 GitHub OAuth App"]}),children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,children:(0,P.jsxs)(y.A,{severity:"info",sx:{wordWrap:"break-word"},children:["Homepage URL \u586b ",(0,P.jsx)("b",{children:e.ServerAddress}),"\uff0cAuthorization callback URL \u586b ",(0,P.jsx)("b",{children:`${e.ServerAddress}/oauth/github`})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"GitHubClientId",children:"GitHub Client ID"}),(0,P.jsx)(m.A,{id:"GitHubClientId",name:"GitHubClientId",value:e.GitHubClientId||"",onChange:v,label:"GitHub Client ID",placeholder:"\u8f93\u5165\u4f60\u6ce8\u518c\u7684 GitHub OAuth APP \u7684 ID",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"GitHubClientSecret",children:"GitHub Client Secret"}),(0,P.jsx)(m.A,{id:"GitHubClientSecret",name:"GitHubClientSecret",value:e.GitHubClientSecret||"",onChange:v,label:"GitHub Client Secret",placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{i.GitHubClientId!==e.GitHubClientId&&await T("GitHubClientId",e.GitHubClientId),i.GitHubClientSecret!==e.GitHubClientSecret&&""!==e.GitHubClientSecret&&await T("GitHubClientSecret",e.GitHubClientSecret)},children:"\u4fdd\u5b58 GitHub OAuth \u8bbe\u7f6e"})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e\u98de\u4e66\u6388\u6743\u767b\u5f55",subTitle:(0,P.jsxs)("span",{children:[" ","\u7528\u4ee5\u652f\u6301\u901a\u8fc7\u98de\u4e66\u8fdb\u884c\u767b\u5f55\u6ce8\u518c\uff0c",(0,P.jsx)("a",{href:"https://open.feishu.cn/app",target:"_blank",rel:"noreferrer",children:"\u70b9\u51fb\u6b64\u5904"}),"\u7ba1\u7406\u4f60\u7684\u98de\u4e66\u5e94\u7528"]}),children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,children:(0,P.jsxs)(y.A,{severity:"info",sx:{wordWrap:"break-word"},children:["\u4e3b\u9875\u94fe\u63a5\u586b ",(0,P.jsx)("code",{children:e.ServerAddress}),"\uff0c\u91cd\u5b9a\u5411 URL \u586b ",(0,P.jsx)("code",{children:`${e.ServerAddress}/oauth/lark`})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"LarkClientId",children:"App ID"}),(0,P.jsx)(m.A,{id:"LarkClientId",name:"LarkClientId",value:e.LarkClientId||"",onChange:v,label:"App ID",placeholder:"\u8f93\u5165 App ID",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"LarkClientSecret",children:"App Secret"}),(0,P.jsx)(m.A,{id:"LarkClientSecret",name:"LarkClientSecret",value:e.LarkClientSecret||"",onChange:v,label:"App Secret",placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{i.LarkClientId!==e.LarkClientId&&await T("LarkClientId",e.LarkClientId),i.LarkClientSecret!==e.LarkClientSecret&&""!==e.LarkClientSecret&&await T("LarkClientSecret",e.LarkClientSecret)},children:"\u4fdd\u5b58\u98de\u4e66 OAuth \u8bbe\u7f6e"})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e WeChat Server",subTitle:(0,P.jsxs)("span",{children:["\u7528\u4ee5\u652f\u6301\u901a\u8fc7\u5fae\u4fe1\u8fdb\u884c\u767b\u5f55\u6ce8\u518c\uff0c",(0,P.jsx)("a",{href:"https://github.com/songquanpeng/wechat-server",target:"_blank",rel:"noopener noreferrer",children:"\u70b9\u51fb\u6b64\u5904"}),"\u4e86\u89e3 WeChat Server"]}),children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,md:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"WeChatServerAddress",children:"WeChat Server \u670d\u52a1\u5668\u5730\u5740"}),(0,P.jsx)(m.A,{id:"WeChatServerAddress",name:"WeChatServerAddress",value:e.WeChatServerAddress||"",onChange:v,label:"WeChat Server \u670d\u52a1\u5668\u5730\u5740",placeholder:"\u4f8b\u5982\uff1ahttps://yourdomain.com",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"WeChatServerToken",children:"WeChat Server \u8bbf\u95ee\u51ed\u8bc1"}),(0,P.jsx)(m.A,{id:"WeChatServerToken",name:"WeChatServerToken",value:e.WeChatServerToken||"",onChange:v,label:"WeChat Server \u8bbf\u95ee\u51ed\u8bc1",placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"WeChatAccountQRCodeImageURL",children:"\u5fae\u4fe1\u516c\u4f17\u53f7\u4e8c\u7ef4\u7801\u56fe\u7247\u94fe\u63a5"}),(0,P.jsx)(m.A,{id:"WeChatAccountQRCodeImageURL",name:"WeChatAccountQRCodeImageURL",value:e.WeChatAccountQRCodeImageURL||"",onChange:v,label:"\u5fae\u4fe1\u516c\u4f17\u53f7\u4e8c\u7ef4\u7801\u56fe\u7247\u94fe\u63a5",placeholder:"\u8f93\u5165\u4e00\u4e2a\u56fe\u7247\u94fe\u63a5",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{i.WeChatServerAddress!==e.WeChatServerAddress&&await T("WeChatServerAddress",(0,g.UC)(e.WeChatServerAddress)),i.WeChatAccountQRCodeImageURL!==e.WeChatAccountQRCodeImageURL&&await T("WeChatAccountQRCodeImageURL",e.WeChatAccountQRCodeImageURL),i.WeChatServerToken!==e.WeChatServerToken&&""!==e.WeChatServerToken&&await T("WeChatServerToken",e.WeChatServerToken)},children:"\u4fdd\u5b58 WeChat Server \u8bbe\u7f6e"})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e OIDC",subTitle:(0,P.jsx)("span",{children:"\u7528\u4ee5\u652f\u6301\u901a\u8fc7 OIDC \u767b\u5f55\uff0c\u4f8b\u5982 Okta\u3001Auth0 \u7b49\u517c\u5bb9 OIDC \u534f\u8bae\u7684 IdP"}),children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsxs)(F.A,{xs:12,md:12,children:[(0,P.jsxs)(y.A,{severity:"info",sx:{wordWrap:"break-word"},children:["\u4e3b\u9875\u94fe\u63a5\u586b ",(0,P.jsx)("code",{children:e.ServerAddress}),"\uff0c\u91cd\u5b9a\u5411 URL \u586b ",(0,P.jsx)("code",{children:`${e.ServerAddress}/oauth/oidc`})]})," ",(0,P.jsx)("br",{}),(0,P.jsx)(y.A,{severity:"info",sx:{wordWrap:"break-word"},children:"\u82e5\u4f60\u7684 OIDC Provider \u652f\u6301 Discovery Endpoint\uff0c\u4f60\u53ef\u4ee5\u4ec5\u586b\u5199 OIDC Well-Known URL\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u83b7\u53d6 OIDC \u914d\u7f6e"})]}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"OidcClientId",children:"Client ID"}),(0,P.jsx)(m.A,{id:"OidcClientId",name:"OidcClientId",value:e.OidcClientId||"",onChange:v,label:"Client ID",placeholder:"\u8f93\u5165 OIDC \u7684 Client ID",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"OidcClientSecret",children:"Client Secret"}),(0,P.jsx)(m.A,{id:"OidcClientSecret",name:"OidcClientSecret",value:e.OidcClientSecret||"",onChange:v,label:"Client Secret",placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"OidcWellKnown",children:"Well-Known URL"}),(0,P.jsx)(m.A,{id:"OidcWellKnown",name:"OidcWellKnown",value:e.OidcWellKnown||"",onChange:v,label:"Well-Known URL",placeholder:"\u8bf7\u8f93\u5165 OIDC \u7684 Well-Known URL",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"OidcAuthorizationEndpoint",children:"Authorization Endpoint"}),(0,P.jsx)(m.A,{id:"OidcAuthorizationEndpoint",name:"OidcAuthorizationEndpoint",value:e.OidcAuthorizationEndpoint||"",onChange:v,label:"Authorization Endpoint",placeholder:"\u8f93\u5165 OIDC \u7684 Authorization Endpoint",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"OidcTokenEndpoint",children:"Token Endpoint"}),(0,P.jsx)(m.A,{id:"OidcTokenEndpoint",name:"OidcTokenEndpoint",value:e.OidcTokenEndpoint||"",onChange:v,label:"Token Endpoint",placeholder:"\u8f93\u5165 OIDC \u7684 Token Endpoint",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"OidcUserinfoEndpoint",children:"Userinfo Endpoint"}),(0,P.jsx)(m.A,{id:"OidcUserinfoEndpoint",name:"OidcUserinfoEndpoint",value:e.OidcUserinfoEndpoint||"",onChange:v,label:"Userinfo Endpoint",placeholder:"\u8f93\u5165 OIDC \u7684 Userinfo Endpoint",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{if(""!==e.OidcWellKnown){if(!e.OidcWellKnown.startsWith("http://")&&!e.OidcWellKnown.startsWith("https://"))return void(0,g.Qg)("Well-Known URL \u5fc5\u987b\u4ee5 http:// \u6216 https:// \u5f00\u5934");try{const n=await S.n.get(e.OidcWellKnown);e.OidcAuthorizationEndpoint=n.data.authorization_endpoint,e.OidcTokenEndpoint=n.data.token_endpoint,e.OidcUserinfoEndpoint=n.data.userinfo_endpoint,(0,g.Te)("\u83b7\u53d6 OIDC \u914d\u7f6e\u6210\u529f\uff01")}catch(n){(0,g.Qg)("\u83b7\u53d6 OIDC \u914d\u7f6e\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u72b6\u51b5\u548c Well-Known URL \u662f\u5426\u6b63\u786e")}}i.OidcWellKnown!==e.OidcWellKnown&&await T("OidcWellKnown",e.OidcWellKnown),i.OidcClientId!==e.OidcClientId&&await T("OidcClientId",e.OidcClientId),i.OidcClientSecret!==e.OidcClientSecret&&""!==e.OidcClientSecret&&await T("OidcClientSecret",e.OidcClientSecret),i.OidcAuthorizationEndpoint!==e.OidcAuthorizationEndpoint&&await T("OidcAuthorizationEndpoint",e.OidcAuthorizationEndpoint),i.OidcTokenEndpoint!==e.OidcTokenEndpoint&&await T("OidcTokenEndpoint",e.OidcTokenEndpoint),i.OidcUserinfoEndpoint!==e.OidcUserinfoEndpoint&&await T("OidcUserinfoEndpoint",e.OidcUserinfoEndpoint)},children:"\u4fdd\u5b58 OIDC \u8bbe\u7f6e"})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e Message Pusher",subTitle:(0,P.jsxs)("span",{children:["\u7528\u4ee5\u63a8\u9001\u62a5\u8b66\u4fe1\u606f\uff0c",(0,P.jsx)("a",{href:"https://github.com/songquanpeng/message-pusher",target:"_blank",rel:"noreferrer",children:"\u70b9\u51fb\u6b64\u5904"}),"\u4e86\u89e3 Message Pusher"]}),children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"MessagePusherAddress",children:"Message Pusher \u63a8\u9001\u5730\u5740"}),(0,P.jsx)(m.A,{id:"MessagePusherAddress",name:"MessagePusherAddress",value:e.MessagePusherAddress||"",onChange:v,label:"Message Pusher \u63a8\u9001\u5730\u5740",placeholder:"\u4f8b\u5982\uff1ahttps://msgpusher.com/push/your_username",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"MessagePusherToken",children:"Message Pusher \u8bbf\u95ee\u51ed\u8bc1"}),(0,P.jsx)(m.A,{id:"MessagePusherToken",name:"MessagePusherToken",type:"password",value:e.MessagePusherToken||"",onChange:v,label:"Message Pusher \u8bbf\u95ee\u51ed\u8bc1",placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{i.MessagePusherAddress!==e.MessagePusherAddress&&await T("MessagePusherAddress",(0,g.UC)(e.MessagePusherAddress)),i.MessagePusherToken!==e.MessagePusherToken&&""!==e.MessagePusherToken&&await T("MessagePusherToken",e.MessagePusherToken)},children:"\u4fdd\u5b58 Message Pusher \u8bbe\u7f6e"})})]})}),(0,P.jsx)(h.A,{title:"\u914d\u7f6e Turnstile",subTitle:(0,P.jsxs)("span",{children:["\u7528\u4ee5\u652f\u6301\u7528\u6237\u6821\u9a8c\uff0c",(0,P.jsx)("a",{href:"https://dash.cloudflare.com/",target:"_blank",rel:"noopener noreferrer",children:"\u70b9\u51fb\u6b64\u5904"}),"\u7ba1\u7406\u4f60\u7684 Turnstile Sites\uff0c\u63a8\u8350\u9009\u62e9 Invisible Widget Type"]}),children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"TurnstileSiteKey",children:"Turnstile Site Key"}),(0,P.jsx)(m.A,{id:"TurnstileSiteKey",name:"TurnstileSiteKey",value:e.TurnstileSiteKey||"",onChange:v,label:"Turnstile Site Key",placeholder:"\u8f93\u5165\u4f60\u6ce8\u518c\u7684 Turnstile Site Key",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,md:6,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"TurnstileSecretKey",children:"Turnstile Secret Key"}),(0,P.jsx)(m.A,{id:"TurnstileSecretKey",name:"TurnstileSecretKey",type:"password",value:e.TurnstileSecretKey||"",onChange:v,label:"Turnstile Secret Key",placeholder:"\u654f\u611f\u4fe1\u606f\u4e0d\u4f1a\u53d1\u9001\u5230\u524d\u7aef\u663e\u793a",disabled:l})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{i.TurnstileSiteKey!==e.TurnstileSiteKey&&await T("TurnstileSiteKey",e.TurnstileSiteKey),i.TurnstileSecretKey!==e.TurnstileSecretKey&&""!==e.TurnstileSecretKey&&await T("TurnstileSecretKey",e.TurnstileSecretKey)},children:"\u4fdd\u5b58 Turnstile \u8bbe\u7f6e"})})]})})]}),(0,P.jsxs)(M.A,{open:o,onClose:()=>c(!1),maxWidth:"md",children:[(0,P.jsx)(O.A,{sx:{margin:"0px",fontWeight:700,lineHeight:"1.55556",padding:"24px",fontSize:"1.125rem"},children:"\u8b66\u544a"}),(0,P.jsx)(R.A,{}),(0,P.jsx)(I.A,{children:"\u53d6\u6d88\u5bc6\u7801\u767b\u5f55\u5c06\u5bfc\u81f4\u6240\u6709\u672a\u7ed1\u5b9a\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f\u7684\u7528\u6237\uff08\u5305\u62ec\u7ba1\u7406\u5458\uff09\u65e0\u6cd5\u901a\u8fc7\u5bc6\u7801\u767b\u5f55\uff0c\u786e\u8ba4\u53d6\u6d88\uff1f"}),(0,P.jsxs)(L.A,{children:[(0,P.jsx)(C.A,{onClick:()=>c(!1),children:"\u53d6\u6d88"}),(0,P.jsx)(C.A,{sx:{color:"error.main"},onClick:async()=>{c(!1),await T("PasswordLoginEnabled","false")},children:"\u786e\u5b9a"})]})]})]})},D=i(96);var H=()=>{let[e,n]=(0,t.useState)({Footer:"",Notice:"",About:"",SystemName:"",Logo:"",HomePageContent:"",Theme:""}),[i,a]=(0,t.useState)(!1);const[l,s]=(0,t.useState)(!1),[r,d]=(0,t.useState)({tag_name:"",content:""});(0,t.useEffect)(()=>{(async()=>{const i=await S.n.get("/api/option/"),{success:t,message:a,data:l}=i.data;if(t){let i={};l.forEach(n=>{n.key in e&&(i[n.key]=n.value)}),n(i)}else(0,g.Qg)(a)})().then()},[]);const o=async(e,i)=>{a(!0);const t=await S.n.put("/api/option/",{key:e,value:i}),{success:l,message:s}=t.data;l?(n(n=>({...n,[e]:i})),(0,g.Te)("\u4fdd\u5b58\u6210\u529f")):(0,g.Qg)(s),a(!1)},c=async e=>{let{name:i,value:t}=e.target;n(e=>({...e,[i]:t}))};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(u.A,{spacing:2,children:[(0,P.jsx)(h.A,{title:"\u901a\u7528\u8bbe\u7f6e",children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{const e=await S.n.get("https://api.github.com/repos/songquanpeng/one-api/releases/latest"),{tag_name:n,body:i}=e.data;""===n?(0,g.Te)(`\u5df2\u662f\u6700\u65b0\u7248\u672c\uff1a${n}`):(d({tag_name:n,content:D.xI.parse(i)}),s(!0))},children:"\u68c0\u67e5\u66f4\u65b0"})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(x.A,{fullWidth:!0,children:(0,P.jsx)(b.A,{multiline:!0,maxRows:15,id:"Notice",label:"\u516c\u544a",value:e.Notice,name:"Notice",onChange:c,minRows:10,placeholder:"\u5728\u6b64\u8f93\u5165\u65b0\u7684\u516c\u544a\u5185\u5bb9\uff0c\u652f\u6301 Markdown & HTML \u4ee3\u7801"})})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{await o("Notice",e.Notice)},children:"\u4fdd\u5b58\u516c\u544a"})})]})}),(0,P.jsx)(h.A,{title:"\u4e2a\u6027\u5316\u8bbe\u7f6e",children:(0,P.jsxs)(F.A,{container:!0,spacing:{xs:3,sm:2,md:4},children:[(0,P.jsx)(F.A,{xs:12,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"SystemName",children:"\u7cfb\u7edf\u540d\u79f0"}),(0,P.jsx)(m.A,{id:"SystemName",name:"SystemName",value:e.SystemName||"",onChange:c,label:"\u7cfb\u7edf\u540d\u79f0",placeholder:"\u5728\u6b64\u8f93\u5165\u7cfb\u7edf\u540d\u79f0",disabled:i})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{await o("SystemName",e.SystemName)},children:"\u8bbe\u7f6e\u7cfb\u7edf\u540d\u79f0"})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"Theme",children:"\u4e3b\u9898\u540d\u79f0"}),(0,P.jsx)(m.A,{id:"Theme",name:"Theme",value:e.Theme||"",onChange:c,label:"\u4e3b\u9898\u540d\u79f0",placeholder:"\u8bf7\u8f93\u5165\u4e3b\u9898\u540d\u79f0",disabled:i})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{await o("Theme",e.Theme)},children:"\u8bbe\u7f6e\u4e3b\u9898\uff08\u91cd\u542f\u751f\u6548\uff09"})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsxs)(x.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{htmlFor:"Logo",children:"Logo \u56fe\u7247\u5730\u5740"}),(0,P.jsx)(m.A,{id:"Logo",name:"Logo",value:e.Logo||"",onChange:c,label:"Logo \u56fe\u7247\u5730\u5740",placeholder:"\u5728\u6b64\u8f93\u5165Logo \u56fe\u7247\u5730\u5740",disabled:i})]})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{await o("Logo",e.Logo)},children:"\u8bbe\u7f6e Logo"})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(x.A,{fullWidth:!0,children:(0,P.jsx)(b.A,{multiline:!0,maxRows:15,id:"HomePageContent",label:"\u9996\u9875\u5185\u5bb9",value:e.HomePageContent,name:"HomePageContent",onChange:c,minRows:10,placeholder:"\u5728\u6b64\u8f93\u5165\u9996\u9875\u5185\u5bb9\uff0c\u652f\u6301 Markdown & HTML \u4ee3\u7801\uff0c\u8bbe\u7f6e\u540e\u9996\u9875\u7684\u72b6\u6001\u4fe1\u606f\u5c06\u4e0d\u518d\u663e\u793a\u3002\u5982\u679c\u8f93\u5165\u7684\u662f\u4e00\u4e2a\u94fe\u63a5\uff0c\u5219\u4f1a\u4f7f\u7528\u8be5\u94fe\u63a5\u4f5c\u4e3a iframe \u7684 src \u5c5e\u6027\uff0c\u8fd9\u5141\u8bb8\u4f60\u8bbe\u7f6e\u4efb\u610f\u7f51\u9875\u4f5c\u4e3a\u9996\u9875\u3002"})})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:()=>(async n=>{await o(n,e[n])})("HomePageContent"),children:"\u4fdd\u5b58\u9996\u9875\u5185\u5bb9"})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(x.A,{fullWidth:!0,children:(0,P.jsx)(b.A,{multiline:!0,maxRows:15,id:"About",label:"\u5173\u4e8e",value:e.About,name:"About",onChange:c,minRows:10,placeholder:"\u5728\u6b64\u8f93\u5165\u65b0\u7684\u5173\u4e8e\u5185\u5bb9\uff0c\u652f\u6301 Markdown & HTML \u4ee3\u7801\u3002\u5982\u679c\u8f93\u5165\u7684\u662f\u4e00\u4e2a\u94fe\u63a5\uff0c\u5219\u4f1a\u4f7f\u7528\u8be5\u94fe\u63a5\u4f5c\u4e3a iframe \u7684 src \u5c5e\u6027\uff0c\u8fd9\u5141\u8bb8\u4f60\u8bbe\u7f6e\u4efb\u610f\u7f51\u9875\u4f5c\u4e3a\u5173\u4e8e\u9875\u9762\u3002"})})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{await o("About",e.About)},children:"\u4fdd\u5b58\u5173\u4e8e"})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(y.A,{severity:"warning",children:"\u79fb\u9664 One API \u7684\u7248\u6743\u6807\u8bc6\u5fc5\u987b\u9996\u5148\u83b7\u5f97\u6388\u6743\uff0c\u9879\u76ee\u7ef4\u62a4\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7cbe\u529b\uff0c\u5982\u679c\u672c\u9879\u76ee\u5bf9\u4f60\u6709\u610f\u4e49\uff0c\u8bf7\u4e3b\u52a8\u652f\u6301\u672c\u9879\u76ee\u3002"})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(x.A,{fullWidth:!0,children:(0,P.jsx)(b.A,{multiline:!0,maxRows:15,id:"Footer",label:"\u9875\u811a",value:e.Footer,name:"Footer",onChange:c,minRows:10,placeholder:"\u5728\u6b64\u8f93\u5165\u65b0\u7684\u9875\u811a\uff0c\u7559\u7a7a\u5219\u4f7f\u7528\u9ed8\u8ba4\u9875\u811a\uff0c\u652f\u6301 HTML \u4ee3\u7801"})})}),(0,P.jsx)(F.A,{xs:12,children:(0,P.jsx)(C.A,{variant:"contained",onClick:async()=>{await o("Footer",e.Footer)},children:"\u8bbe\u7f6e\u9875\u811a"})})]})})]}),(0,P.jsxs)(M.A,{open:l,onClose:()=>s(!1),fullWidth:!0,maxWidth:"md",children:[(0,P.jsxs)(O.A,{sx:{margin:"0px",fontWeight:700,lineHeight:"1.55556",padding:"24px",fontSize:"1.125rem"},children:["\u65b0\u7248\u672c\uff1a",r.tag_name]}),(0,P.jsx)(R.A,{}),(0,P.jsxs)(I.A,{children:[" ",(0,P.jsx)("div",{dangerouslySetInnerHTML:{__html:r.content}})]}),(0,P.jsxs)(L.A,{children:[(0,P.jsx)(C.A,{onClick:()=>s(!1),children:"\u5173\u95ed"}),(0,P.jsx)(C.A,{onClick:async()=>{s(!1),window.location="https://github.com/songquanpeng/one-api/releases/latest"},children:"\u53bbGitHub\u67e5\u770b"})]})]})]})},G=i(2223),K=i(6971);function N(e){const{children:n,value:i,index:t,...l}=e;return(0,P.jsx)("div",{role:"tabpanel",hidden:i!==t,id:`setting-tabpanel-${t}`,"aria-labelledby":`setting-tab-${t}`,...l,children:i===t&&(0,P.jsx)(a.A,{sx:{p:3},children:n})})}function z(e){return{id:`setting-tab-${e}`,"aria-controls":`setting-tabpanel-${e}`}}var _=()=>{const e=(0,K.zy)(),n=(0,K.Zp)(),i=e.hash.replace("#",""),h={operation:0,system:1,other:2},[u,x]=(0,t.useState)(h[i]||0);return(0,t.useEffect)(()=>{const n=()=>{const n=e.hash.replace("#","");x(h[n]||0)};return window.addEventListener("hashchange",n),()=>{window.removeEventListener("hashchange",n)}},[e,h]),(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(l.A,{children:(0,P.jsx)(G.A,{children:(0,P.jsxs)(a.A,{sx:{width:"100%"},children:[(0,P.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,P.jsxs)(s.A,{value:u,onChange:(e,i)=>{x(i);const t=Object.keys(h);n(`#${t[i]}`)},variant:"scrollable",scrollButtons:"auto",children:[(0,P.jsx)(r.A,{label:"\u8fd0\u8425\u8bbe\u7f6e",...z(0),icon:(0,P.jsx)(d.A,{}),iconPosition:"start"}),(0,P.jsx)(r.A,{label:"\u7cfb\u7edf\u8bbe\u7f6e",...z(1),icon:(0,P.jsx)(o.A,{}),iconPosition:"start"}),(0,P.jsx)(r.A,{label:"\u5176\u4ed6\u8bbe\u7f6e",...z(2),icon:(0,P.jsx)(c.A,{}),iconPosition:"start"})]})}),(0,P.jsx)(N,{value:u,index:0,children:(0,P.jsx)(W,{})}),(0,P.jsx)(N,{value:u,index:1,children:(0,P.jsx)(U,{})}),(0,P.jsx)(N,{value:u,index:2,children:(0,P.jsx)(H,{})})]})})})})}}}]);
//# sourceMappingURL=814.a5b449a3.chunk.js.map