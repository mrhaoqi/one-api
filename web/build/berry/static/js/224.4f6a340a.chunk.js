"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[224],{1675:function(e,t,a){var r=a(5043),n=a(6446),o=a(6240),l=a(4535),i=a(310),s=a(579);const c=(0,r.forwardRef)(({children:e,color:t="default",variant:a="soft",startIcon:r,endIcon:l,sx:i,...c},u)=>{const h=(0,o.A)(),x={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,s.jsxs)(d,{ref:u,component:"span",ownerState:{color:t,variant:a},sx:{...r&&{pl:.75},...l&&{pr:.75},...i},theme:h,...c,children:[r&&(0,s.jsxs)(n.A,{sx:{mr:.75,...x},children:[" ",r," "]}),e,l&&(0,s.jsxs)(n.A,{sx:{ml:.75,...x},children:[" ",l," "]})]})});t.A=c;const d=(0,l.Ay)(n.A)(({theme:e,ownerState:t})=>{var a,r,n,o,l;const s="filled"===t.variant,c="outlined"===t.variant,d="soft"===t.variant,u="ghost"===t.variant,h={..."default"===t.color&&{...s&&{color:e.palette.grey[300],backgroundColor:e.palette.text.primary},...c&&{color:e.palette.grey[500],border:`2px solid ${e.palette.grey[500]}`},...d&&{color:e.palette.text.secondary,backgroundColor:(0,i.X4)(e.palette.grey[500],.16)}}},x={..."default"!==t.color&&{...s&&{color:e.palette.background.paper,backgroundColor:null===(a=e.palette[t.color])||void 0===a?void 0:a.main},...c&&{backgroundColor:"transparent",color:null===(r=e.palette[t.color])||void 0===r?void 0:r.main,border:`2px solid ${null===(n=e.palette[t.color])||void 0===n?void 0:n.main}`},...d&&{color:e.palette[t.color].dark,backgroundColor:(0,i.X4)(null===(o=e.palette[t.color])||void 0===o?void 0:o.main,.16)},...u&&{color:null===(l=e.palette[t.color])||void 0===l?void 0:l.main}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:e.spacing(0,.75),fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightBold,transition:e.transitions.create("all",{duration:e.transitions.duration.shorter}),...h,...x}})},1736:function(e,t,a){a.d(t,{re:function(){return r}});a(5512);const r=10;a(8032)},5098:function(e,t,a){a.d(t,{A:function(){return c}});var r=a(5263),n=a(4050),o=a(1787),l=a(6240),i=a(8302),s=a(579);function c({filterName:e,handleFilterName:t,placeholder:a}){const c=(0,l.A)().palette.grey[500];return(0,s.jsx)(r.A,{sx:{height:80,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,s.jsx)(n.A,{id:"keyword",sx:{minWidth:"100%"},value:e,onChange:t,placeholder:a,startAdornment:(0,s.jsx)(o.A,{position:"start",children:(0,s.jsx)(i.A,{stroke:1.5,size:"20px",color:c})})})})}},6224:function(e,t,a){a.r(t),a.d(t,{default:function(){return ae}});var r=a(5043),n=a(9985),o=a(1806),l=a(3460),i=a(9650),s=a(864),c=a.n(s),d=a(9090),u=a(611),h=a(1165),x=a(5263),p=a(8911),m=a(5865),y=a(2518),g=a(2110),A=a(6446),v=a(9252),j=a(8076),k=a(2420),f=a(7392),b=a(1020),w=a(2143),C=a(1081),I=a(6600),S=a(5316),q=a(8533),M=a(9347),P=a(1675),_=a(8721),R=a(1112),O=a(7510),B=a(1330),W=a(579);function F({item:e,manageRedemption:t,handleOpenModal:a,setModalRedemptionId:o}){const[l,i]=(0,r.useState)(null),[s,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(e.status),h=()=>{c(!1)},x=()=>{i(null)};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(j.A,{tabIndex:e.id,children:[(0,W.jsx)(k.A,{children:e.id}),(0,W.jsx)(k.A,{children:e.name}),(0,W.jsx)(k.A,{children:1!==e.status&&2!==e.status?(0,W.jsx)(P.A,{variant:"filled",color:3===e.status?"success":"orange",children:3===e.status?"\u5df2\u4f7f\u7528":"\u672a\u77e5"}):(0,W.jsx)(_.A,{id:`switch-${e.id}`,checked:1===d,onChange:async()=>{const a=1===d?2:1,{success:r}=await t(e.id,"status",a);r&&u(a)}})}),(0,W.jsx)(k.A,{children:(0,n.X8)(e.quota)}),(0,W.jsx)(k.A,{children:(0,n.gA)(e.created_time)}),(0,W.jsx)(k.A,{children:e.redeemed_time?(0,n.gA)(e.redeemed_time):"\u5c1a\u672a\u5151\u6362"}),(0,W.jsx)(k.A,{children:(0,W.jsxs)(p.A,{direction:"row",spacing:1,children:[(0,W.jsx)(y.A,{variant:"contained",color:"primary",onClick:()=>{(0,n.C)(e.key,"\u5151\u6362\u7801")},children:"\u590d\u5236"}),(0,W.jsx)(f.A,{onClick:e=>{i(e.currentTarget)},sx:{color:"rgb(99, 115, 129)"},children:(0,W.jsx)(R.A,{})})]})})]}),(0,W.jsxs)(b.Ay,{open:!!l,anchorEl:l,onClose:x,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[(0,W.jsxs)(w.A,{disabled:1!==e.status&&2!==e.status,onClick:()=>{x(),a(),o(e.id)},children:[(0,W.jsx)(O.A,{style:{marginRight:"16px"}}),"\u7f16\u8f91"]}),(0,W.jsxs)(w.A,{onClick:()=>{x(),c(!0)},sx:{color:"error.main"},children:[(0,W.jsx)(B.A,{style:{marginRight:"16px"}}),"\u5220\u9664"]})]}),(0,W.jsxs)(C.A,{open:s,onClose:h,children:[(0,W.jsx)(I.A,{children:"\u5220\u9664\u5151\u6362\u7801"}),(0,W.jsx)(S.A,{children:(0,W.jsxs)(q.A,{children:["\u662f\u5426\u5220\u9664\u5151\u6362\u7801 ",e.name,"\uff1f"]})}),(0,W.jsxs)(M.A,{children:[(0,W.jsx)(y.A,{onClick:h,children:"\u5173\u95ed"}),(0,W.jsx)(y.A,{onClick:async()=>{x(),await t(e.id,"delete","")},sx:{color:"error.main"},autoFocus:!0,children:"\u5220\u9664"})]})]})]})}var T=a(4882);var L=()=>(0,W.jsx)(T.A,{children:(0,W.jsxs)(j.A,{children:[(0,W.jsx)(k.A,{children:"ID"}),(0,W.jsx)(k.A,{children:"\u540d\u79f0"}),(0,W.jsx)(k.A,{children:"\u72b6\u6001"}),(0,W.jsx)(k.A,{children:"\u989d\u5ea6"}),(0,W.jsx)(k.A,{children:"\u521b\u5efa\u65f6\u95f4"}),(0,W.jsx)(k.A,{children:"\u5151\u6362\u65f6\u95f4"}),(0,W.jsx)(k.A,{children:"\u64cd\u4f5c"})]})}),z=a(5098),G=a(3862),$=a(1736),D=a(1522),Q=a(3991),V=a(3033),E=a(3516),N=a(6240),H=a(9336),X=a(3193),U=a(9190),Y=a(4050),Z=a(1673),J=a(1787);const K=V.Ik().shape({is_edit:V.zM(),name:V.Yj().required("\u540d\u79f0 \u4e0d\u80fd\u4e3a\u7a7a"),quota:V.ai().min(0,"\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),count:V.ai().when("is_edit",{is:!1,then:V.ai().min(1,"\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1"),otherwise:V.ai()})}),ee={is_edit:!1,name:"",quota:1e5,count:1};var te=({open:e,redemptiondId:t,onCancel:a,onOk:o})=>{const l=(0,N.A)(),[i,s]=(0,r.useState)(ee);return(0,r.useEffect)(()=>{t?(async()=>{let e=await G.n.get(`/api/redemption/${t}`);const{success:a,message:r,data:o}=e.data;a?(o.is_edit=!0,s(o)):(0,n.Qg)(r)})().then():s(ee)},[t]),(0,W.jsxs)(C.A,{open:e,onClose:a,fullWidth:!0,maxWidth:"md",children:[(0,W.jsx)(I.A,{sx:{margin:"0px",fontWeight:700,lineHeight:"1.55556",padding:"24px",fontSize:"1.125rem"},children:t?"\u7f16\u8f91\u5151\u6362\u7801":"\u65b0\u5efa\u5151\u6362\u7801"}),(0,W.jsx)(H.A,{}),(0,W.jsx)(S.A,{children:(0,W.jsx)(E.l1,{initialValues:i,enableReinitialize:!0,validationSchema:K,onSubmit:async(e,{setErrors:a,setStatus:r,setSubmitting:l})=>{let i;l(!0),i=e.is_edit?await G.n.put("/api/redemption/",{...e,id:parseInt(t)}):await G.n.post("/api/redemption/",e);const{success:s,message:c,data:d}=i.data;if(s){if(e.is_edit)(0,n.Te)("\u5151\u6362\u7801\u66f4\u65b0\u6210\u529f\uff01");else if((0,n.Te)("\u5151\u6362\u7801\u521b\u5efa\u6210\u529f\uff01"),d.length>1){let t="";for(let e=0;e<d.length;e++)t+=d[e]+"\n";(0,n.I9)(t,`${e.name}.txt`)}l(!1),r({success:!0}),o(!0)}else(0,n.Qg)(c),a({submit:c})},children:({errors:e,handleBlur:t,handleChange:r,handleSubmit:o,touched:i,values:s,isSubmitting:c})=>(0,W.jsxs)("form",{noValidate:!0,onSubmit:o,children:[(0,W.jsxs)(X.A,{fullWidth:!0,error:Boolean(i.name&&e.name),sx:{...l.typography.otherInput},children:[(0,W.jsx)(U.A,{htmlFor:"channel-name-label",children:"\u540d\u79f0"}),(0,W.jsx)(Y.A,{id:"channel-name-label",label:"\u540d\u79f0",type:"text",value:s.name,name:"name",onBlur:t,onChange:r,inputProps:{autoComplete:"name"},"aria-describedby":"helper-text-channel-name-label"}),i.name&&e.name&&(0,W.jsx)(Z.A,{error:!0,id:"helper-tex-channel-name-label",children:e.name})]}),(0,W.jsxs)(X.A,{fullWidth:!0,error:Boolean(i.quota&&e.quota),sx:{...l.typography.otherInput},children:[(0,W.jsx)(U.A,{htmlFor:"channel-quota-label",children:"\u989d\u5ea6"}),(0,W.jsx)(Y.A,{id:"channel-quota-label",label:"\u989d\u5ea6",type:"number",value:s.quota,name:"quota",endAdornment:(0,W.jsx)(J.A,{position:"end",children:(0,n.t0)(s.quota)}),onBlur:t,onChange:r,"aria-describedby":"helper-text-channel-quota-label",disabled:s.unlimited_quota}),i.quota&&e.quota&&(0,W.jsx)(Z.A,{error:!0,id:"helper-tex-channel-quota-label",children:e.quota})]}),!s.is_edit&&(0,W.jsxs)(X.A,{fullWidth:!0,error:Boolean(i.count&&e.count),sx:{...l.typography.otherInput},children:[(0,W.jsx)(U.A,{htmlFor:"channel-count-label",children:"\u6570\u91cf"}),(0,W.jsx)(Y.A,{id:"channel-count-label",label:"\u6570\u91cf",type:"number",value:s.count,name:"count",onBlur:t,onChange:r,"aria-describedby":"helper-text-channel-count-label"}),i.count&&e.count&&(0,W.jsx)(Z.A,{error:!0,id:"helper-tex-channel-count-label",children:e.count})]}),(0,W.jsxs)(M.A,{children:[(0,W.jsx)(y.A,{onClick:a,children:"\u53d6\u6d88"}),(0,W.jsx)(y.A,{disableElevation:!0,disabled:c,type:"submit",variant:"contained",color:"primary",children:"\u63d0\u4ea4"})]})]})})})]})};function ae(){const[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(0),[j,k]=(0,r.useState)(!1),[f,b]=(0,r.useState)(""),[w,C]=(0,r.useState)(!1),[I,S]=(0,r.useState)(0),q=async a=>{k(!0);const r=await G.n.get(`/api/redemption/?p=${a}`),{success:o,message:l,data:i}=r.data;if(o)if(0===a)t(i);else{let r=[...e];r.splice(a*$.re,i.length,...i),t(r)}else(0,n.Qg)(l);k(!1)},M=async(e,t,a)=>{const r="/api/redemption/";let o,l={id:e};switch(t){case"delete":o=await G.n.delete(r+e);break;case"status":o=await G.n.put(r+"?status_only=true",{...l,status:a})}const{success:i,message:s}=o.data;return i?((0,n.Te)("\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\uff01"),"delete"===t&&await q(0)):(0,n.Qg)(s),o.data},P=async()=>{await q(0),s(0),b("")},_=e=>{S(e),C(!0)},R=()=>{C(!1),S(0)};return(0,r.useEffect)(()=>{q(0).then().catch(e=>{(0,n.Qg)(e)})},[]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(p.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:2.5,children:[(0,W.jsx)(m.A,{variant:"h4",children:"\u5151\u6362"}),(0,W.jsx)(y.A,{variant:"contained",color:"primary",startIcon:(0,W.jsx)(D.A,{}),onClick:()=>_(0),children:"\u65b0\u5efa\u5151\u6362\u7801"})]}),(0,W.jsxs)(g.A,{children:[(0,W.jsx)(A.A,{component:"form",onSubmit:async e=>{if(e.preventDefault(),""===f)return await q(0),void s(0);k(!0);const a=await G.n.get(`/api/redemption/search?keyword=${f}`),{success:r,message:o,data:l}=a.data;r?(t(l),s(0)):(0,n.Qg)(o),k(!1)},noValidate:!0,sx:{marginTop:2},children:(0,W.jsx)(z.A,{filterName:f,handleFilterName:e=>{b(e.target.value)},placeholder:"\u641c\u7d22\u5151\u6362\u7801\u7684ID\u548c\u540d\u79f0..."})}),(0,W.jsx)(x.A,{sx:{textAlign:"right",height:50,display:"flex",justifyContent:"space-between",p:e=>e.spacing(0,1,0,3)},children:(0,W.jsx)(v.A,{children:(0,W.jsx)(h.A,{variant:"outlined","aria-label":"outlined small primary button group",sx:{marginBottom:2},children:(0,W.jsx)(y.A,{onClick:P,startIcon:(0,W.jsx)(Q.A,{width:"18px"}),children:"\u5237\u65b0"})})})}),j&&(0,W.jsx)(u.A,{}),(0,W.jsx)(c(),{component:"div",children:(0,W.jsx)(i.A,{sx:{overflow:"unset"},children:(0,W.jsxs)(o.A,{sx:{minWidth:800},children:[(0,W.jsx)(L,{}),(0,W.jsx)(l.A,{children:e.slice(a*$.re,(a+1)*$.re).map(e=>(0,W.jsx)(F,{item:e,manageRedemption:M,handleOpenModal:_,setModalRedemptionId:S},e.id))})]})})}),(0,W.jsx)(d.A,{page:a,component:"div",count:e.length+(e.length%$.re===0?1:0),rowsPerPage:$.re,onPageChange:(t,a)=>{(async()=>{a===Math.ceil(e.length/$.re)&&await q(a),s(a)})()},rowsPerPageOptions:[$.re]})]}),(0,W.jsx)(te,{open:w,onCancel:R,onOk:e=>{!0===e&&(R(),P())},redemptiondId:I})]})}},8032:function(e,t,a){a.d(t,{p:function(){return r}});const r={1:{key:1,text:"OpenAI",value:1,color:"success"},14:{key:14,text:"Anthropic Claude",value:14,color:"primary"},33:{key:33,text:"AWS",value:33,color:"primary"},37:{key:37,text:"Cloudflare",value:37,color:"success"},3:{key:3,text:"Azure OpenAI",value:3,color:"success"},11:{key:11,text:"Google PaLM2",value:11,color:"warning"},24:{key:24,text:"Google Gemini",value:24,color:"warning"},28:{key:28,text:"Mistral AI",value:28,color:"warning"},40:{key:40,text:"\u5b57\u8282\u706b\u5c71\u5f15\u64ce",value:40,color:"primary"},15:{key:15,text:"\u767e\u5ea6\u6587\u5fc3\u5343\u5e06",value:15,color:"primary"},17:{key:17,text:"\u963f\u91cc\u901a\u4e49\u5343\u95ee",value:17,color:"primary"},18:{key:18,text:"\u8baf\u98de\u661f\u706b\u8ba4\u77e5",value:18,color:"primary"},16:{key:16,text:"\u667a\u8c31 ChatGLM",value:16,color:"primary"},19:{key:19,text:"360 \u667a\u8111",value:19,color:"primary"},25:{key:25,text:"Moonshot AI",value:25,color:"primary"},23:{key:23,text:"\u817e\u8baf\u6df7\u5143",value:23,color:"primary"},26:{key:26,text:"\u767e\u5ddd\u5927\u6a21\u578b",value:26,color:"primary"},27:{key:27,text:"MiniMax",value:27,color:"primary"},29:{key:29,text:"Groq",value:29,color:"primary"},30:{key:30,text:"Ollama",value:30,color:"primary"},31:{key:31,text:"\u96f6\u4e00\u4e07\u7269",value:31,color:"primary"},32:{key:32,text:"\u9636\u8dc3\u661f\u8fb0",value:32,color:"primary"},34:{key:34,text:"Coze",value:34,color:"primary"},35:{key:35,text:"Cohere",value:35,color:"primary"},36:{key:36,text:"DeepSeek",value:36,color:"primary"},38:{key:38,text:"DeepL",value:38,color:"primary"},39:{key:39,text:"together.ai",value:39,color:"primary"},42:{key:42,text:"VertexAI",value:42,color:"primary"},43:{key:43,text:"Proxy",value:43,color:"primary"},44:{key:44,text:"SiliconFlow",value:44,color:"primary"},45:{key:45,text:"xAI",value:45,color:"primary"},45:{key:46,text:"Replicate",value:46,color:"primary"},41:{key:41,text:"Novita",value:41,color:"purple"},8:{key:8,text:"\u81ea\u5b9a\u4e49\u6e20\u9053",value:8,color:"error"},22:{key:22,text:"\u77e5\u8bc6\u5e93\uff1aFastGPT",value:22,color:"success"},21:{key:21,text:"\u77e5\u8bc6\u5e93\uff1aAI Proxy",value:21,color:"success"},20:{key:20,text:"OpenRouter",value:20,color:"success"},2:{key:2,text:"\u4ee3\u7406\uff1aAPI2D",value:2,color:"success"},5:{key:5,text:"\u4ee3\u7406\uff1aOpenAI-SB",value:5,color:"success"},7:{key:7,text:"\u4ee3\u7406\uff1aOhMyGPT",value:7,color:"success"},10:{key:10,text:"\u4ee3\u7406\uff1aAI Proxy",value:10,color:"success"},4:{key:4,text:"\u4ee3\u7406\uff1aCloseAI",value:4,color:"success"},6:{key:6,text:"\u4ee3\u7406\uff1aOpenAI Max",value:6,color:"success"},9:{key:9,text:"\u4ee3\u7406\uff1aAI.LS",value:9,color:"success"},12:{key:12,text:"\u4ee3\u7406\uff1aAPI2GPT",value:12,color:"success"},13:{key:13,text:"\u4ee3\u7406\uff1aAIGC2D",value:13,color:"success"}}},8721:function(e,t,a){var r=a(4535),n=a(4598);const o=(0,r.Ay)(n.A)(({theme:e})=>({padding:8,"& .MuiSwitch-track":{borderRadius:11,"&:before, &:after":{content:'""',position:"absolute",top:"50%",transform:"translateY(-50%)",width:16,height:16},"&:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="${encodeURIComponent(e.palette.getContrastText(e.palette.primary.main))}" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>')`,left:12},"&:after":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="${encodeURIComponent(e.palette.getContrastText(e.palette.primary.main))}" d="M19,13H5V11H19V13Z" /></svg>')`,right:12}},"& .MuiSwitch-thumb":{boxShadow:"none",width:16,height:16,margin:2}}));t.A=o}}]);
//# sourceMappingURL=224.4f6a340a.chunk.js.map