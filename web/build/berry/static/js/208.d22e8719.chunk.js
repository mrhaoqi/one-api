"use strict";(self.webpackChunkone_api_web=self.webpackChunkone_api_web||[]).push([[208],{1787:function(e,r,t){t.d(r,{A:function(){return w}});var n=t(8587),i=t(8168),o=t(5043),s=t(8387),a=t(8610),l=t(6803),c=t(5865),d=t(1053),u=t(5213),m=t(4535),p=t(2532),h=t(2372);function f(e){return(0,h.Ay)("MuiInputAdornment",e)}var v,x=(0,p.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),g=t(8206),A=t(579);const j=["children","className","component","disablePointerEvents","disableTypography","position","variant"],y=(0,m.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[`position${(0,l.A)(t.position)}`],!0===t.disablePointerEvents&&r.disablePointerEvents,r[t.variant]]}})(({theme:e,ownerState:r})=>(0,i.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===r.variant&&{[`&.${x.positionStart}&:not(.${x.hiddenLabel})`]:{marginTop:16}},"start"===r.position&&{marginRight:8},"end"===r.position&&{marginLeft:8},!0===r.disablePointerEvents&&{pointerEvents:"none"}));var w=o.forwardRef(function(e,r){const t=(0,g.b)({props:e,name:"MuiInputAdornment"}),{children:m,className:p,component:h="div",disablePointerEvents:x=!1,disableTypography:w=!1,position:b,variant:E}=t,P=(0,n.A)(t,j),_=(0,u.A)()||{};let S=E;E&&_.variant,_&&!S&&(S=_.variant);const I=(0,i.A)({},t,{hiddenLabel:_.hiddenLabel,size:_.size,disablePointerEvents:x,position:b,variant:S}),k=(e=>{const{classes:r,disablePointerEvents:t,hiddenLabel:n,position:i,size:o,variant:s}=e,c={root:["root",t&&"disablePointerEvents",i&&`position${(0,l.A)(i)}`,s,n&&"hiddenLabel",o&&`size${(0,l.A)(o)}`]};return(0,a.A)(c,f,r)})(I);return(0,A.jsx)(d.A.Provider,{value:null,children:(0,A.jsx)(y,(0,i.A)({as:h,ownerState:I,className:(0,s.A)(k.root,p),ref:r},P,{children:"string"!==typeof m||w?(0,A.jsxs)(o.Fragment,{children:["start"===b?v||(v=(0,A.jsx)("span",{className:"notranslate",children:"\u200b"})):null,m]}):(0,A.jsx)(c.A,{color:"text.secondary",children:m})}))})})},2021:function(e,r,t){var n=t(6446),i=t(9949),o=t(579);r.A=({children:e,...r})=>(0,o.jsx)(i.A,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...r,children:(0,o.jsx)(n.A,{sx:{p:{xs:2,sm:3,xl:5}},children:e})})},2819:function(e,r,t){var n=t(4994);r.A=void 0;var i=n(t(39)),o=t(579);r.A=(0,i.default)((0,o.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},3320:function(e,r,t){var n=t(5043),i=t(8228),o=t(5880),s=t(579);const a=(0,n.forwardRef)(({children:e,type:r,direction:t,offset:n,scale:a},l)=>{var c,d;let u,m;switch(t){case"up":case"left":u=n,m=0;break;default:u=0,m=n}const[p,h]=(0,i.Y)(u,m),[f,v]=(0,i.Y)(u,m);switch(r){case"rotate":return(0,s.jsx)(o.P.div,{ref:l,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:e});case"slide":return"up"===t||"down"===t?(0,s.jsx)(o.P.div,{ref:l,animate:{y:void 0!==f?f:""},onHoverEnd:()=>v(),onHoverStart:()=>v(),children:e}):(0,s.jsx)(o.P.div,{ref:l,animate:{x:void 0!==p?p:""},onHoverEnd:()=>h(),onHoverStart:()=>h(),children:e});default:return"number"===typeof a&&(a={hover:a,tap:a}),(0,s.jsx)(o.P.div,{ref:l,whileHover:{scale:null===(c=a)||void 0===c?void 0:c.hover},whileTap:{scale:null===(d=a)||void 0===d?void 0:d.tap},children:e})}});a.defaultProps={type:"scale",offset:10,direction:"right",scale:{hover:1,tap:.9}},r.A=a},4617:function(e,r,t){var n=t(3862),i=t(6971),o=t(9985);r.A=()=>{const e=(0,i.Zp)();return{register:async(r,t)=>{try{let i=localStorage.getItem("aff");i&&(r={...r,aff_code:i});const s=await n.n.post(`/api/user/register?turnstile=${t}`,r),{success:a,message:l}=s.data;return a&&((0,o.Te)("\u6ce8\u518c\u6210\u529f\uff01"),e("/login")),{success:a,message:l}}catch(i){return{success:!1,message:""}}},sendVerificationCode:async(e,r)=>{try{const t=await n.n.get(`/api/verification?email=${e}&turnstile=${r}`),{success:i,message:s}=t.data;return i&&(0,o.Te)("\u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u68c0\u67e5\u4f60\u7684\u90ae\u7bb1\uff01"),{success:i,message:s}}catch(t){return{success:!1,message:""}}}}}},6215:function(e,r,t){var n=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);i&&!("get"in i?!r.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),i=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&n(r,e,t);return i(r,e),r};Object.defineProperty(r,"__esModule",{value:!0}),r.useTurnstile=void 0;const s=o(t(5043)),a="undefined"!==typeof globalThis?globalThis:window;let l,c,d="undefined"!==typeof a.turnstile?"ready":"unloaded";const u=new Promise((e,r)=>{c={resolve:e,reject:r},"ready"===d&&e(void 0)});{const e="cf__reactTurnstileOnLoad",r="https://challenges.cloudflare.com/turnstile/v0/api.js";l=()=>{if("unloaded"===d){d="loading",a[e]=()=>{c.resolve(),d="ready",delete a[e]};const t=`${r}?onload=${e}&render=explicit`,n=document.createElement("script");n.src=t,n.async=!0,n.addEventListener("error",()=>{c.reject("Failed to load Turnstile."),delete a[e]}),document.head.appendChild(n)}return u}}r.default=function({id:e,className:r,style:t,sitekey:n,action:i,cData:o,theme:a,language:c,tabIndex:u,responseField:m,responseFieldName:p,size:h,fixedSize:f,retry:v,retryInterval:x,refreshExpired:g,appearance:A,execution:j,userRef:y,onVerify:w,onSuccess:b,onLoad:E,onError:P,onExpire:_,onTimeout:S,onAfterInteractive:I,onBeforeInteractive:k,onUnsupported:C}){const T=(0,s.useRef)(null),B=(0,s.useState)({onVerify:w,onSuccess:b,onLoad:E,onError:P,onExpire:_,onTimeout:S,onAfterInteractive:I,onBeforeInteractive:k,onUnsupported:C})[0],M=null!==y&&void 0!==y?y:T,R=f?{width:"compact"===h?"130px":"flexible"===h?"100%":"300px",height:"compact"===h?"120px":"65px",...t}:t;return(0,s.useEffect)(()=>{if(!M.current)return;let e=!1,r="";return(async()=>{var t,s;if("ready"!==d)try{await l()}catch(w){return void(null===(t=B.onError)||void 0===t||t.call(B,w))}if(e||!M.current)return;let f;const y={sitekey:n,action:i,cData:o,theme:a,language:c,tabindex:u,"response-field":m,"response-field-name":p,size:h,retry:v,"retry-interval":x,"refresh-expired":g,appearance:A,execution:j,callback:(e,r)=>{var t,n;null===(t=B.onVerify)||void 0===t||t.call(B,e,f),null===(n=B.onSuccess)||void 0===n||n.call(B,e,r,f)},"error-callback":e=>{var r;return null===(r=B.onError)||void 0===r?void 0:r.call(B,e,f)},"expired-callback":e=>{var r;return null===(r=B.onExpire)||void 0===r?void 0:r.call(B,e,f)},"timeout-callback":()=>{var e;return null===(e=B.onTimeout)||void 0===e?void 0:e.call(B,f)},"after-interactive-callback":()=>{var e;return null===(e=B.onAfterInteractive)||void 0===e?void 0:e.call(B,f)},"before-interactive-callback":()=>{var e;return null===(e=B.onBeforeInteractive)||void 0===e?void 0:e.call(B,f)},"unsupported-callback":()=>{var e;return null===(e=B.onUnsupported)||void 0===e?void 0:e.call(B,f)}};r=window.turnstile.render(M.current,y),f=function(e){return{execute:r=>window.turnstile.execute(e,r),reset:()=>window.turnstile.reset(e),getResponse:()=>window.turnstile.getResponse(e),isExpired:()=>window.turnstile.isExpired(e)}}(r),null===(s=B.onLoad)||void 0===s||s.call(B,r,f)})(),()=>{e=!0,r&&window.turnstile.remove(r)}},[n,i,o,a,c,u,m,p,h,v,x,g,A,j]),(0,s.useEffect)(()=>{B.onVerify=w,B.onSuccess=b,B.onLoad=E,B.onError=P,B.onExpire=_,B.onTimeout=S,B.onAfterInteractive=I,B.onBeforeInteractive=k,B.onUnsupported=C},[w,b,E,P,_,S,I,k,C]),s.default.createElement("div",{ref:M,id:e,className:r,style:R})},r.useTurnstile=function(){const[e,r]=(0,s.useState)(d);return(0,s.useEffect)(()=>{"ready"!==d&&u.then(()=>r(d))},[]),a.turnstile}},7260:function(e,r,t){var n=t(4994);r.A=void 0;var i=n(t(39)),o=t(579);r.A=(0,i.default)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},7743:function(e,r,t){var n=t(4535),i=t(9456),o=t(6971),s=t(5043),a=t(4107),l=t(579);const c=(0,n.Ay)("div")(({theme:e})=>({backgroundColor:e.palette.background.default}));r.A=({children:e})=>{const r=(0,i.d4)(e=>e.account),{isUserLoaded:t}=(0,s.useContext)(a.R),n=(0,o.Zp)();return(0,s.useEffect)(()=>{t&&r.user&&n("/panel")},[r,n,t]),(0,l.jsxs)(c,{children:[" ",e," "]})}},8208:function(e,r,t){t.r(r),t.d(r,{default:function(){return z}});var n=t(1318),i=t(6240),o=t(344),s=t(8903),a=t(8911),l=t(5865),c=t(9336),d=t(7743),u=t(2021),m=t(8907),p=t(5043),h=t(9456),f=t(4617),v=t(6215),x=t.n(v),g=t(3193),A=t(9190),j=t(4050),y=t(1673),w=t(1787),b=t(7392),E=t(6446),P=t(2518),_=t(3033),S=t(3516),I=t(3320),k=t(9802);const C=e=>{let r=0;return e.length>5&&(r+=1),e.length>7&&(r+=1),(e=>new RegExp(/[0-9]/).test(e))(e)&&(r+=1),(e=>new RegExp(/[!#@$%^&*)(+=._-]/).test(e))(e)&&(r+=1),(e=>new RegExp(/[a-z]/).test(e)&&new RegExp(/[A-Z]/).test(e))(e)&&(r+=1),r};var T=t(7260),B=t(2819),M=t(9985),R=t(579);var L=({...e})=>{const r=(0,i.A)(),{register:t,sendVerificationCode:o}=(0,f.A)(),a=(0,h.d4)(e=>e.siteInfo),[c,d]=(0,p.useState)(!1),[u]=(0,n.ok)(),[m,v]=(0,p.useState)(!1),[L,z]=(0,p.useState)(!1),[F,O]=(0,p.useState)(""),[V,$]=(0,p.useState)(""),[D,N]=(0,p.useState)(0),[W,H]=(0,p.useState)(),Y=()=>{d(!c)},q=e=>{e.preventDefault()},U=e=>{const r=C(e);var t;N(r),H((t=r)<2?{label:"Poor",color:k.A.errorMain}:t<3?{label:"Weak",color:k.A.warningDark}:t<4?{label:"Normal",color:k.A.orangeMain}:t<5?{label:"Good",color:k.A.successMain}:t<6?{label:"Strong",color:k.A.successDark}:{label:"Poor",color:k.A.errorMain})};return(0,p.useEffect)(()=>{let e=u.get("aff");e&&localStorage.setItem("aff",e),v(a.email_verification),a.turnstile_check&&(z(!0),O(a.turnstile_site_key))},[a]),(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(S.l1,{initialValues:{username:"",password:"",confirmPassword:"",email:m?"":void 0,verification_code:m?"":void 0,submit:null},validationSchema:_.Ik().shape({username:_.Yj().max(255).required("\u7528\u6237\u540d\u662f\u5fc5\u586b\u9879"),password:_.Yj().max(255).required("\u5bc6\u7801\u662f\u5fc5\u586b\u9879"),confirmPassword:_.Yj().required("\u786e\u8ba4\u5bc6\u7801\u662f\u5fc5\u586b\u9879").oneOf([_.KR("password"),null],"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4"),email:m?_.Yj().email("\u5fc5\u987b\u662f\u6709\u6548\u7684Email\u5730\u5740").max(255).required("Email\u662f\u5fc5\u586b\u9879"):_.gl(),verification_code:m?_.Yj().max(255).required("\u9a8c\u8bc1\u7801\u662f\u5fc5\u586b\u9879"):_.gl()}),onSubmit:async(e,{setErrors:r,setStatus:n,setSubmitting:i})=>{if(L&&""===V)return(0,M.cf)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01"),void i(!1);const{success:o,message:s}=await t(e,V);o?n({success:!0}):(n({success:!1}),s&&r({submit:s}))},children:({errors:t,handleBlur:n,handleChange:i,handleSubmit:a,isSubmitting:d,touched:u,values:p})=>(0,R.jsxs)("form",{noValidate:!0,onSubmit:a,...e,children:[(0,R.jsxs)(g.A,{fullWidth:!0,error:Boolean(u.username&&t.username),sx:{...r.typography.customInput},children:[(0,R.jsx)(A.A,{htmlFor:"outlined-adornment-username-register",children:"\u7528\u6237\u540d"}),(0,R.jsx)(j.A,{id:"outlined-adornment-username-register",type:"text",value:p.username,name:"username",onBlur:n,onChange:i,inputProps:{autoComplete:"username"}}),u.username&&t.username&&(0,R.jsx)(y.A,{error:!0,id:"standard-weight-helper-text--register",children:t.username})]}),(0,R.jsxs)(g.A,{fullWidth:!0,error:Boolean(u.password&&t.password),sx:{...r.typography.customInput},children:[(0,R.jsx)(A.A,{htmlFor:"outlined-adornment-password-register",children:"\u5bc6\u7801"}),(0,R.jsx)(j.A,{id:"outlined-adornment-password-register",type:c?"text":"password",value:p.password,name:"password",label:"Password",onBlur:n,onChange:e=>{i(e),U(e.target.value)},endAdornment:(0,R.jsx)(w.A,{position:"end",children:(0,R.jsx)(b.A,{"aria-label":"toggle password visibility",onClick:Y,onMouseDown:q,edge:"end",size:"large",color:"primary",children:c?(0,R.jsx)(T.A,{}):(0,R.jsx)(B.A,{})})}),inputProps:{}}),u.password&&t.password&&(0,R.jsx)(y.A,{error:!0,id:"standard-weight-helper-text-password-register",children:t.password})]}),(0,R.jsxs)(g.A,{fullWidth:!0,error:Boolean(u.confirmPassword&&t.confirmPassword),sx:{...r.typography.customInput},children:[(0,R.jsx)(A.A,{htmlFor:"outlined-adornment-confirm-password-register",children:"\u786e\u8ba4\u5bc6\u7801"}),(0,R.jsx)(j.A,{id:"outlined-adornment-confirm-password-register",type:c?"text":"password",value:p.confirmPassword,name:"confirmPassword",label:"Confirm Password",onBlur:n,onChange:i,inputProps:{}}),u.confirmPassword&&t.confirmPassword&&(0,R.jsx)(y.A,{error:!0,id:"standard-weight-helper-text-confirm-password-register",children:t.confirmPassword})]}),0!==D&&(0,R.jsx)(g.A,{fullWidth:!0,children:(0,R.jsx)(E.A,{sx:{mb:2},children:(0,R.jsxs)(s.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,R.jsx)(s.Ay,{item:!0,children:(0,R.jsx)(E.A,{style:{backgroundColor:null===W||void 0===W?void 0:W.color},sx:{width:85,height:8,borderRadius:"7px"}})}),(0,R.jsx)(s.Ay,{item:!0,children:(0,R.jsx)(l.A,{variant:"subtitle1",fontSize:"0.75rem",children:null===W||void 0===W?void 0:W.label})})]})})}),m&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(g.A,{fullWidth:!0,error:Boolean(u.email&&t.email),sx:{...r.typography.customInput},children:[(0,R.jsx)(A.A,{htmlFor:"outlined-adornment-email-register",children:"Email"}),(0,R.jsx)(j.A,{id:"outlined-adornment-email-register",type:"text",value:p.email,name:"email",onBlur:n,onChange:i,endAdornment:(0,R.jsx)(w.A,{position:"end",children:(0,R.jsx)(P.A,{variant:"contained",color:"primary",onClick:()=>(async e=>{if(""===e)return void(0,M.Qg)("\u8bf7\u8f93\u5165\u90ae\u7bb1");if(L&&""===V)return void(0,M.Qg)("\u8bf7\u7a0d\u540e\u51e0\u79d2\u91cd\u8bd5\uff0cTurnstile \u6b63\u5728\u68c0\u67e5\u7528\u6237\u73af\u5883\uff01");const{success:r,message:t}=await o(e,V);r||(0,M.Qg)(t)})(p.email),children:"\u53d1\u9001\u9a8c\u8bc1\u7801"})}),inputProps:{}}),u.email&&t.email&&(0,R.jsx)(y.A,{error:!0,id:"standard-weight-helper-text--register",children:t.email})]}),(0,R.jsxs)(g.A,{fullWidth:!0,error:Boolean(u.verification_code&&t.verification_code),sx:{...r.typography.customInput},children:[(0,R.jsx)(A.A,{htmlFor:"outlined-adornment-verification_code-register",children:"\u9a8c\u8bc1\u7801"}),(0,R.jsx)(j.A,{id:"outlined-adornment-verification_code-register",type:"text",value:p.verification_code,name:"verification_code",onBlur:n,onChange:i,inputProps:{}}),u.verification_code&&t.verification_code&&(0,R.jsx)(y.A,{error:!0,id:"standard-weight-helper-text--register",children:t.verification_code})]})]}),t.submit&&(0,R.jsx)(E.A,{sx:{mt:3},children:(0,R.jsx)(y.A,{error:!0,children:t.submit})}),L?(0,R.jsx)(x(),{sitekey:F,onVerify:e=>{$(e)}}):(0,R.jsx)(R.Fragment,{}),(0,R.jsx)(E.A,{sx:{mt:2},children:(0,R.jsx)(I.A,{children:(0,R.jsx)(P.A,{disableElevation:!0,disabled:d,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"\u6ce8\u518c"})})})]})})})};var z=()=>{const e=(0,i.A)(),r=(0,o.A)(e.breakpoints.down("md"));return(0,R.jsx)(d.A,{children:(0,R.jsx)(s.Ay,{container:!0,direction:"column",justifyContent:"flex-end",children:(0,R.jsx)(s.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.Ay,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 136px)"},children:(0,R.jsx)(s.Ay,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,R.jsx)(u.A,{children:(0,R.jsxs)(s.Ay,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,R.jsx)(s.Ay,{item:!0,sx:{mb:3},children:(0,R.jsx)(n.N_,{to:"#",children:(0,R.jsx)(m.A,{})})}),(0,R.jsx)(s.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.Ay,{container:!0,direction:r?"column-reverse":"row",alignItems:"center",justifyContent:"center",children:(0,R.jsx)(s.Ay,{item:!0,children:(0,R.jsx)(a.A,{alignItems:"center",justifyContent:"center",spacing:1,children:(0,R.jsx)(l.A,{color:e.palette.primary.main,gutterBottom:!0,variant:r?"h3":"h2",children:"\u6ce8\u518c"})})})})}),(0,R.jsx)(s.Ay,{item:!0,xs:12,children:(0,R.jsx)(L,{})}),(0,R.jsx)(s.Ay,{item:!0,xs:12,children:(0,R.jsx)(c.A,{})}),(0,R.jsx)(s.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.Ay,{item:!0,container:!0,direction:"column",alignItems:"center",xs:12,children:(0,R.jsx)(l.A,{component:n.N_,to:"/login",variant:"subtitle1",sx:{textDecoration:"none"},children:"\u5df2\u7ecf\u6709\u5e10\u53f7\u4e86\uff1f\u70b9\u51fb\u767b\u5f55"})})})]})})})})})})})}}}]);
//# sourceMappingURL=208.d22e8719.chunk.js.map